!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=34)}([function(e,t){e.exports=require("react")},function(e,t){e.exports=require("prop-types")},function(e,t){e.exports=require("immutable")},function(e,t){e.exports=require("lodash.get")},function(e,t){e.exports=require("redux-actions")},function(e,t){e.exports=require("graphql")},function(e,t){e.exports=require("react-router-dom")},function(e,t){e.exports=require("react-redux")},function(e,t){e.exports=require("uuid")},function(e,t){e.exports={selected:"_3Vq2K",translationText:"_3Lcio",rotate:"_2Mrpm",iconWrapper:"_1uSJY"}},function(e,t){e.exports=require("path")},function(e,t){e.exports=require("body-parser")},function(e,t){e.exports=require("axios")},function(e,t){e.exports=require("redux")},function(e,t){e.exports=require("react-dom/server")},function(e,t){e.exports=require("child_process")},function(e,t){e.exports=require("helmet")},function(e,t){e.exports=require("express")},function(e,t){e.exports=require("cookie-parser")},function(e,t){e.exports=require("cookie-session")},function(e,t){e.exports=require("csurf")},function(e,t){e.exports=require("express-graphql")},function(e,t){e.exports=require("mysql")},function(e,t){e.exports=require("react-router")},function(e,t){e.exports=require("serialize-javascript")},function(e,t){e.exports={container:"_32jyT"}},function(e,t){e.exports=require("regenerator-runtime/runtime")},function(e,t){e.exports={button:"_2Xmei","navbar-link":"_3BFfb","is-arrowless":"_3ujN6","is-loading":"_3dyMw",spinAround:"_2yBSy","is-focused":"_3q9xy","is-active":"_2UAwy",icon:"_1h1NB","is-small":"_2nNpo","is-medium":"YjV-1","is-large":"_1NKCn","is-hovered":"_2jMxW","is-text":"_3C3uy","is-white":"_3P3_i","is-inverted":"_2euom","is-outlined":"_1uhj4","is-black":"PRf3H","is-light":"_28UI3","is-dark":"_14-AE","is-primary":"_37Qkw","is-link":"_2imQd","is-info":"FRdq9","is-success":"_35tee","is-warning":"_1LoU_","is-danger":"_2SWcj","is-normal":"WzYrT","is-fullwidth":"_3aTs4","is-static":"_3ZNf-","is-rounded":"_2BAq3",buttons:"_33OKz","are-small":"_1wZgR","are-medium":"_1Na4h","are-large":"_1VzMV","has-addons":"_1b7JT","is-selected":"dTJw0","is-expanded":"_2yEZt","is-centered":"_1vHfC","is-right":"_3TUcD",navbar:"_1YL2t","navbar-brand":"_1JcPc","navbar-item":"_22QhE","navbar-burger":"_1ZMDj","navbar-start":"_1H_lt","navbar-end":"_3Skfl","has-dropdown":"_11zK9","navbar-dropdown":"_2pfo8",container:"oFHWz","has-shadow":"_1krh3","is-fixed-bottom":"_2GVJh","is-fixed-top":"H6Zjl","has-navbar-fixed-top":"_2DYG7","has-navbar-fixed-bottom":"_3b5Y6","navbar-tabs":"zrLXv","navbar-menu":"_3MiYA","is-tab":"_30w03","navbar-content":"_3vSSh","navbar-divider":"_3xKAg","is-fixed-bottom-touch":"_3-swe","is-fixed-top-touch":"_26QxA","has-navbar-fixed-top-touch":"_1fOZX","has-navbar-fixed-bottom-touch":"_2d-aV","is-spaced":"lkFj2","is-transparent":"_1Rvxz","is-hoverable":"_1htf9","has-dropdown-up":"_2GW7f","is-boxed":"_2NrG1","is-fixed-bottom-desktop":"_2xDvZ","is-fixed-top-desktop":"_2LpSv","has-navbar-fixed-top-desktop":"_1B-DT","has-navbar-fixed-bottom-desktop":"_3psro","has-spaced-navbar-fixed-top":"_1RgMD","has-spaced-navbar-fixed-bottom":"_2S1og",hero:"_3-4V3","is-fullheight-with-navbar":"_34LTu"}},function(e,t){e.exports={spinContainer:"_3Vbkh",spinLoader:"_3Kppt","spinLoader-spin":"_3CdIW","spinLoader-normal-opacity":"j3l7M"}},function(e,t,n){var r={"./admin.js":30,"./color.js":31,"./user.js":32};function o(e){var t=a(e);return n(t)}function a(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}o.keys=function(){return Object.keys(r)},o.resolve=a,e.exports=o,o.id=29},function(e,t,n){"use strict";n.r(t);var r,o=n(4),a=n(2),i=n.n(a);function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var s=i.a.fromJS({list:[],loading:!1}),l=Object(o.handleActions)((c(r={},"admin/getList",(function(e){return e.set("loading",!0)})),c(r,"admin/getList/success",(function(e,t){return e.merge({loading:!1,list:i.a.fromJS(t.payload)})})),c(r,"admin/getList/fail",(function(e){return e.merge({list:i.a.fromJS([]),loading:!1})})),c(r,"admin/decideColor/success",(function(e,t){return e.updateIn(["list"],(function(e){return e.filter((function(e){return e.get("id")!==t.payload}))})).set("loading",!1)})),r),s);t.default=l},function(e,t,n){"use strict";n.r(t);var r,o=n(4),a=n(2);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var c=Object(a.fromJS)({loading:!1,showVertical:!0,colorDef:{},liked:{},colorIdAllByDate:[],colorIdAllByLike:[],colorIdByMyOwn:[]}),s=Object(o.handleActions)((i(r={},"color/get",(function(e){return e.set("loading",!0)})),i(r,"color/get/success",(function(e,t){var n=t.payload,r=Object(a.List)(),o=Object(a.Map)();n.forEach((function(e){r=r.push(e.id),o=o.set(e.id,Object(a.fromJS)(e))}));var i=n.sort((function(e,t){return t.like-e.like})).map((function(e){return e.id}));return e.merge({colorIdAllByDate:r,colorIdAllByLike:Object(a.fromJS)(i),colorDef:o,loading:!1})})),i(r,"color/get/fail",(function(e){return e.merge({colorIdAllByDate:Object(a.List)(),colorIdAllByLike:Object(a.List)(),loading:!1})})),i(r,"color/toggleLike",(function(e,t){var n=t.payload,r=n.willLike,o=n.id;return(r?e.setIn(["liked",o],!0):e.deleteIn(["liked",o])).updateIn(["colorDef",o,"like"],(function(e){return e+(r?1:-1)}))})),i(r,"color/addNew/success",(function(e,t){var n=t.payload,r=n.id,o=e.setIn(["colorDef",r],Object(a.fromJS)(n));return(o=o.update("colorIdAllByDate",(function(e){return e.unshift(r)}))).update("colorIdAllByLike",(function(e){return e.push(r)}))})),i(r,"color/set/likes",(function(e,t){var n=t.payload.reduce((function(e,t){return e.set(t,!0)}),Object(a.Map)());return e.set("liked",n)})),i(r,"color/set/owns",(function(e,t){var n=t.payload;return e.set("colorIdByMyOwn",Object(a.List)(n))})),i(r,"color/setDirection",(function(e,t){var n=t.payload;return e.set("showVertical",n)})),r),c);t.default=s},function(e,t,n){"use strict";n.r(t);var r,o=n(4),a=n(2);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var c=Object(a.fromJS)({detail:null,facebookUrl:null,lang:null}),s=Object(o.handleActions)((i(r={},"user/auth/success",(function(e,t){var n=t.payload;return e.merge({detail:Object(a.fromJS)(n),facebookUrl:null})})),i(r,"user/auth/fail",(function(e,t){var n=t.payload;return e.merge({detail:null,facebookUrl:n})})),i(r,"user/logoff",(function(e){return e.merge({detail:null,facebookUrl:null})})),i(r,"user/setLanguage",(function(e,t){var n=t.payload;return e.set("lang",n)})),r),c);t.default=s},function(e,t,n){"use strict";n.r(t);var r=n(10),o=n.n(r),a=process.env.PWD,i=["/robots.txt","/sitemap.xml","/favicon.ico"].reduce((function(e,t){return e[t]=!0,e}),{});t.default=function(e,t,n){var r=e.url;if(Object.prototype.hasOwnProperty.call(i,r)){var c=o.a.resolve(a,"./dist".concat(r));t.sendFile(c)}else n(404)}},function(e,t,n){"use strict";n.r(t);var r=n(15),o=(n(26),n(16)),a=n.n(o),i=n(17),c=n.n(i),s=n(11),l=n.n(s),u=n(18),p=n.n(u),d=n(19),m=n.n(d);var f=process.env,b=f.PORT,h=f.SESSION_SECRET,g=f.CSRF_EXCEPTION,v=f.FB_APP_KEY,y=f.FB_APP_SECRET,k=f.FB_REDIRECT_URL,E="https://graph.facebook.com/v3.3",w="//dkny.oss-cn-hangzhou.aliyuncs.com/2/";g||console.log("No CSRF exception defined");var _=n(3),O=n.n(_),C=n(12),L=n.n(C),x=function(e){return"https://www.facebook.com/v3.3/dialog/oauth?client_id=".concat(v,"&response_type=code&state=").concat(e,"&redirect_uri=").concat(k)},S=function(e,t){return Boolean(O()(e,"session.app.isAuth",!1)&&(t||O()(e,"session.app.dbInfo.id",null)))},j=function(e){var t=O()(e,"session.app.tokenInfo.access_token",null);return"string"==typeof t&&t.length>0?t:null},R=function(e){return S(e)&&O()(e,"session.app.dbInfo.isAdmin",!1)};function T(e,t,n,r,o,a,i){try{var c=e[a](i),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,o)}var N=function(e,t){var n=t.code;return{client_id:v,client_secret:y,code:n,redirect_uri:k}},I=function(){var e,t=(e=regeneratorRuntime.mark((function e(t,n){var r,o,a,i,c,s,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=O()(t,"query.code",null),o=O()(t,"query.state",null),a=O()(t,"params.oauth",null),i=O()(t,"session.app.oauthState",null),!r||!o||o!==i){e.next=14;break}return console.log("redirected by ".concat(a," auth...")),c=N(0,t.query),e.next=9,u=c,L()({baseURL:E,method:"get",url:"/oauth/access_token",params:u});case 9:s=e.sent,(l=s.data).access_token?t.session.app={oauth:a,isAuth:!0,tokenInfo:l}:t.session.app={isAuth:!1,authError:"get token failed."},e.next=16;break;case 14:console.log("inconsistant session, error msg in session"),t.session.app={isAuth:!1,authError:"Sorry, something error, please try again."};case 16:n.redirect("/");case 17:case"end":return e.stop()}var u}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){T(a,r,o,i,c,"next",e)}function c(e){T(a,r,o,i,c,"throw",e)}i(void 0)}))});return function(e,n){return t.apply(this,arguments)}}(),A=n(10),M=n.n(A),P=process.env.PWD,D=M.a.resolve(P,"./dist/error.html"),q=n(20),B=n.n(q)()(),F=n(21),U=n.n(F),W=n(8),V=n.n(W),H=n(5),z=n(22),Q=n.n(z),J=process.env,Y=J.SQL_HOST,K=J.SQL_PORT,G=J.SQL_USERNAME,X=J.SQL_PASSWORD,Z=J.SQL_DATABASE,$=Q.a.createPool({connectionLimit:4,multipleStatements:!1,host:Y,port:K,user:G,password:X,database:Z}),ee=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return new Promise((function(n,r){$.query(e,t,(function(e,t){e?(console.error(e),r(e)):n(t)}))}))};function te(e,t,n,r,o,a,i){try{var c=e[a](i),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,o)}function ne(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){te(a,r,o,i,c,"next",e)}function c(e){te(a,r,o,i,c,"throw",e)}i(void 0)}))}}var re={auth:function(e,t){return ne(regeneratorRuntime.mark((function e(){var n,r,o,a,i,c,s,l,u,p,d,m,f,b,h;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=j(t),!S(t,!0)||!n){e.next=36;break}return r={access_token:n,fields:"id,name,picture"},e.prev=3,e.next=6,g=r,L()({baseURL:E,method:"get",url:"/me",params:g});case 6:return o=e.sent,a=o.data,i=a.name,c=a.id,e.next=11,ee("SELECT * FROM colorpk_user WHERE oauth = 'fb' AND oauthid = ?",[c]);case 11:if(1!==(s=e.sent).length){e.next=23;break}return l=s[0],u=l.isadmin,p=l.id,t.session.app.dbInfo={id:p,name:i,isAdmin:u||!1},e.next=17,ee("SELECT color_id FROM colorpk_userlike WHERE user_id= ?",[p]);case 17:return d=e.sent,e.next=20,ee("SELECT a.id FROM colorpk_color a WHERE a.userid=?",[p]);case 20:return m=e.sent,ee("UPDATE colorpk_user SET lastlogin=NOW() WHERE id=?",[p]),e.abrupt("return",{__typename:"User",name:i,isadmin:u,img:O()(a,"picture.data.url",null),likes:d.map((function(e){return e.color_id})),owns:m.map((function(e){return e.id}))});case 23:return e.next=25,ee("INSERT INTO colorpk_user (oauth, name, oauthid, lastlogin) VALUES ('fb', ?, ?, NOW())",[i,c]);case 25:return f=e.sent,b=f.insertId,t.session.app.dbInfo={id:b,name:i,isAdmin:!1},e.abrupt("return",{__typename:"User",id:b,name:i,isadmin:!1,img:O()(a,"picture.data.url",null),likes:[],owns:[]});case 31:return e.prev=31,e.t0=e.catch(3),e.abrupt("return",new H.GraphQLError(e.t0.toString()));case 34:e.next=39;break;case 36:return h=V.a.v1(),t.session.app={oauthState:h},e.abrupt("return",{__typename:"AuthFailResponse",url:x(h),error:O()(t,"session.app.authError",null),status:0});case 39:case"end":return e.stop()}var g}),e,null,[[3,31]])})))()},color:function(e,t){return ne(regeneratorRuntime.mark((function n(){var r,o;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r=e.category,R(t)||"ANONYMOUS"!==r){n.next=3;break}return n.abrupt("return",new H.GraphQLError("color error: no admin access"));case 3:o=null,n.t0=r,n.next="PUBLIC"===n.t0?7:"ANONYMOUS"===n.t0?11:15;break;case 7:return n.next=9,ee("SELECT a.* FROM colorpk_color a WHERE a.display=0 ORDER BY `id` DESC");case 9:return o=n.sent,n.abrupt("break",16);case 11:return n.next=13,ee("SELECT * FROM colorpk_color a WHERE a.display = 1");case 13:return o=n.sent,n.abrupt("break",16);case 15:return n.abrupt("break",16);case 16:return n.prev=16,n.abrupt("return",o.map((function(e){return{id:e.id,like:e.like,color:e.color,userid:e.userid,username:e.username,createdate:e.createdate}})));case 20:return n.prev=20,n.t1=n.catch(16),n.abrupt("return",new H.GraphQLError(n.t1.toString()));case 23:case"end":return n.stop()}}),n,null,[[16,20]])})))()},likeColor:function(e,t){return ne(regeneratorRuntime.mark((function n(){var r,o,a,i,c;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=e.input,o=r.id,a=r.willLike,n.prev=1,S(t)&&(i=O()(t,"session.app.dbInfo.id",null),ee(a?"INSERT INTO colorpk_userlike (user_id, color_id) VALUES (?, ?)":"DELETE FROM colorpk_userlike WHERE user_id= ? AND color_id = ?",[i,o])),n.next=5,ee("UPDATE colorpk_color SET `like` = `like` ".concat(a?"+":"-","  1 WHERE id = ?"),[o]);case 5:return c=n.sent,n.abrupt("return",{status:1===c.affectedRows?0:1});case 9:return n.prev=9,n.t0=n.catch(1),n.abrupt("return",new H.GraphQLError(n.t0.toString()));case 12:case"end":return n.stop()}}),n,null,[[1,9]])})))()},createColor:function(e,t){return ne(regeneratorRuntime.mark((function n(){var r,o,a,i,c,s,l,u,p;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r=e.input.color,o=S(t),a=O()(t,"session.app.dbInfo.name",null),i=O()(t,"session.app.dbInfo.id",null),s=(c=o&&a)?a:null,l=c?i:null,u=(10*Math.random()).toFixed(),27!==r.length){n.next=21;break}return n.prev=9,n.next=12,ee("INSERT INTO colorpk_color (`like`, color, userid, username, colortype, display, createdate) VALUES (?, ?, ?, ?, NULL, ?, NOW())",[u,r,l,s,c?0:1]);case 12:return p=n.sent,n.abrupt("return",{status:0,data:p.insertId});case 16:return n.prev=16,n.t0=n.catch(9),n.abrupt("return",new H.GraphQLError(n.t0.toString()));case 19:n.next=22;break;case 21:return n.abrupt("return",new H.GraphQLError("create error: invalid color input"));case 22:case"end":return n.stop()}}),n,null,[[9,16]])})))()},adjudicateColor:function(e,t){return ne(regeneratorRuntime.mark((function n(){var r,o,a,i;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(R(t)){n.next=2;break}return n.abrupt("return",new H.GraphQLError("adjudicate error: no admin access"));case 2:return r=e.input,o=r.id,a=r.willLike,n.prev=3,n.next=6,ee(a?"UPDATE colorpk_color SET `display` = 0 WHERE id = ?":"DELETE FROM colorpk_color WHERE id = ?",[o]);case 6:return i=n.sent,n.abrupt("return",{status:1===i.affectedRows?0:1});case 10:return n.prev=10,n.t0=n.catch(3),n.abrupt("return",new H.GraphQLError(n.t0.toString()));case 13:case"end":return n.stop()}}),n,null,[[3,10]])})))()},logoff:function(e,t){var n=O()(t,"session.app.dbInfo.name","(unknown)");console.log("logoff ".concat(n,", delete session")),delete t.session.app;var r=V.a.v1();return t.session.app={oauthState:r},{url:x(r)}}},oe=Object(H.buildSchema)("\n  enum ColorCategory {\n    PUBLIC\n    ANONYMOUS\n  }\n\n  interface MutationResponse {\n    status: Int!\n  }\n\n  type Color {\n    id: ID!\n    like: Int!\n    color: String!\n    userid: ID\n    username: String\n    createdate: String\n  }\n\n  type User {\n    img: String\n    isadmin: Boolean\n    name: String\n    likes: [ID!]\n    owns: [ID!]\n  }\n\n  input LikeColorInputType {\n    id: ID!\n    willLike: Boolean!\n  }\n  \n  input CreateColorInputType {\n    color: String!\n  }\n\n  type LikeColorOutputType implements MutationResponse {\n    status: Int!\n  }\n\n  type AdjudicateColorOutputType implements MutationResponse {\n    status: Int!\n  }\n\n  type CreateColorOutputType implements MutationResponse {\n    status: Int!\n    data: ID!\n  }\n\n  type AuthFailResponse implements MutationResponse {\n    status: Int!\n    url: String!\n    error: String\n  }\n\n  union AuthOutputType = User | AuthFailResponse\n\n  type Mutation {\n    likeColor(input: LikeColorInputType!): LikeColorOutputType\n    createColor(input: CreateColorInputType!): CreateColorOutputType\n    adjudicateColor(input: LikeColorInputType!): AdjudicateColorOutputType\n    logoff: AuthFailResponse\n  }\n  \n  type Query {\n    color(category: ColorCategory!): [Color]\n    auth: AuthOutputType\n  }\n\n  schema {\n    query: Query\n    mutation: Mutation\n  } \n"),ae=U()({schema:oe,rootValue:re,graphiql:!1,pretty:!1}),ie=n(0),ce=n.n(ie),se=n(2),le=n(7),ue=n(23),pe=n(13),de=n(14),me=n(1),fe=n.n(me),be=function(){return ce.a.createElement(ie.Fragment,null,ce.a.createElement("meta",{property:"og:url",content:"https://react.colorpk.com"}),ce.a.createElement("meta",{property:"og:site_name",content:"ColorPK v1"}),ce.a.createElement("meta",{property:"og:title",content:"Your Best Color Picker"}),ce.a.createElement("meta",{property:"og:description",content:"ColorPK - Faster lighter and nicer color palette | 全球最大色彩搭配网站 | 颜色搭配 | 艺术设计"}),ce.a.createElement("meta",{property:"og:image",content:"http://dkny.oss-cn-hangzhou.aliyuncs.com/2/icon.png"}),ce.a.createElement("meta",{property:"og:image:type",content:"image/png"}),ce.a.createElement("meta",{property:"og:image:width",content:"1200"}),ce.a.createElement("meta",{property:"og:image:height",content:"620"}),ce.a.createElement("meta",{property:"twitter:site",content:"colorpk"}),ce.a.createElement("meta",{property:"twitter:creator",content:"colorpk"}),ce.a.createElement("meta",{property:"twitter:card",content:"summary_large_image"}),ce.a.createElement("meta",{property:"twitter:title",content:"ColorPK"}),ce.a.createElement("meta",{property:"twitter:description",content:"ColorPK - Faster lighter and nicer color palette | 全球最大色彩搭配网站 | 颜色搭配 | 艺术设计"}),ce.a.createElement("meta",{property:"twitter:image:src",content:"http://dkny.oss-cn-hangzhou.aliyuncs.com/2/icon.png"}),ce.a.createElement("meta",{property:"twitter:image:width",content:"1200"}),ce.a.createElement("meta",{property:"twitter:image:height",content:"1200"}))},he=n(24),ge=n.n(he),ve=function(e){var t=e.title,n=e.style,r=e.script,o=e.children,a=e.version,i=e.csrfToken,c=e.lastBuildDate,s=e.initState;return ce.a.createElement("html",{lang:"en"},ce.a.createElement("head",null,ce.a.createElement("meta",{charSet:"utf-8"}),ce.a.createElement("meta",{httpEquiv:"X-UA-Compatible",content:"IE=edge"}),ce.a.createElement(be,null),ce.a.createElement("title",null,t),ce.a.createElement("meta",{name:"description",content:"ColorPK | Faster lighter and nicer than colorhunt | 全球最大色彩搭配网站 | 颜色搭配 | 艺术设计"}),ce.a.createElement("meta",{name:"viewport",content:"width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no"}),ce.a.createElement("meta",{name:"robots",content:"INDEX,FOLLOW"}),ce.a.createElement("meta",{name:"keywords",content:"colorpk, colorpicker, color picker, palette, color combination"}),ce.a.createElement("link",{rel:"shortcut icon",href:"//dkny.oss-cn-hangzhou.aliyuncs.com/3/fav.ico"}),ce.a.createElement("link",{href:"".concat(n,"?").concat(a),rel:"stylesheet"}),ce.a.createElement("script",{dangerouslySetInnerHTML:{__html:"if(window.location.hostname.indexOf('colorpk.com') > -1){\n            (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':\n            new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],\n            j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=\n            'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);\n            })(window,document,'script','dataLayer','GTM-5LX6LV3');\n\n            var initLoadTime = Date.now();\n            window.addEventListener('_COLORPK_SCRIPT_READY', function(){\n              window.dataLayer.push({\n                'scriptLoadingTime': Date.now() - initLoadTime\n              });\n              console.log('server last build: ".concat(c,"');\n            });\n          }")}})),ce.a.createElement("body",null,ce.a.createElement("noscript",null,ce.a.createElement("iframe",{src:"https://www.googletagmanager.com/ns.html?id=GTM-5LX6LV3",height:"0",width:"0",style:{display:"none",visibility:"hidden"}})),ce.a.createElement("div",{id:"app",dangerouslySetInnerHTML:{__html:o}}),ce.a.createElement("div",{id:"csrf","data-token":i}),ce.a.createElement("script",{dangerouslySetInnerHTML:{__html:"window.".concat("_REDUXSTATE_","=").concat(ge()(s))}}),ce.a.createElement("script",{src:"".concat(r,"?").concat(a),type:"text/javascript"})))};ve.propTypes={title:fe.a.string.isRequired,lastBuildDate:fe.a.string.isRequired,version:fe.a.string.isRequired,style:fe.a.string.isRequired,script:fe.a.string.isRequired,children:fe.a.string.isRequired,csrfToken:fe.a.string.isRequired,initState:fe.a.object.isRequired};var ye=ve,ke=(n(27),n(25)),Ee=n.n(ke),we=n(4),_e=n(6),Oe=n(9),Ce=n.n(Oe),Le=function(){return ce.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24"},ce.a.createElement("title",null,"translation"),ce.a.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}),ce.a.createElement("path",{d:" M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z "}))},xe=[{code:"en",name:"English",data:{language:"Language",popular:"Popular",latest:"Latest",more:"More",about:"About",newColor:"New Color",fbLogin:"Facebook Login",reportIssue:"Report an issue",download:"Download",submit:"Submit",reset:"Reset",return:"Return",profile:"Profile",like:"Like",admin:"Admin",logOut:"Log Out",facebook:"FaceBook",twitter:"Twitter",email:"E-Mail"}},{code:"zh",name:"简体中文",data:{language:"多语言",popular:"最热",latest:"最新",more:"更多",about:"关于",newColor:"创建新颜色",fbLogin:"脸书账号登陆",reportIssue:"报告错误",download:"下载",submit:"添加",reset:"重置",return:"返回",profile:"我的颜色",like:"我的收藏",admin:"管理员",logOut:"注销",facebook:"脸书",twitter:"推特",email:"电邮"}},{code:"ja",name:"日本語",data:{language:"言語",popular:"人気のある",latest:"最新",more:"もっと",about:"約",newColor:"色をつくる",fbLogin:"Facebookでログイン",reportIssue:"問題を報告する",download:"ダウンロード",submit:"提出する",reset:"リセット",return:"戻る",profile:"プロフィール",like:"好む",admin:"管理者",logOut:"サインアウト",facebook:"FaceBook",twitter:"さえずり",email:"Eメール"}},{code:"ko",name:"한국어",data:{language:"언어",popular:"인기 있는",latest:"최근",more:"더",about:"약",newColor:"몹시 떠들어 대다",fbLogin:"페이스 북 로그인",reportIssue:"보고 문제",download:"다운로드",submit:"제출하다",reset:"다시 놓기",return:"반환",profile:"윤곽",like:"인기 있는 말",admin:"관리자",logOut:"로그 아웃하다",facebook:"페이스 북",twitter:"지저귀다",email:"이메일"}},{code:"es",name:"Español",data:{language:"idioma",popular:"popular",latest:"más reciente",more:"Más",about:"acerca de",newColor:"crear nuevo",fbLogin:"cuenta de Facebook",reportIssue:"informe de problema",download:"descargar",submit:"enviar",reset:"Reiniciar",return:"regreso",profile:"perfil",like:"favorita",admin:"administración",logOut:"cerrar sesión",facebook:"Facebook",twitter:"gorjeo",email:"correo electrónico"}},{code:"ru",name:"Русский",data:{language:"Переводы",popular:"популярный",latest:"недавно",more:"Больше",about:"около",newColor:"Создайте",fbLogin:"Логин в фейсбук",reportIssue:"сообщить о проблемах",download:"скачать",submit:"Отправить",reset:"сброс",return:"вернуть",profile:"профиль",like:"любимый",admin:"админ",logOut:"выйти",facebook:"Facebook",twitter:"щебет",email:"Эл. адрес"}}],Se=xe.map((function(e){return{code:e.code,name:e.name}})),je=xe.reduce((function(e,t){return e[t.code]=t.data,e}),{}),Re=function(e){var t=e.onChange;return ce.a.createElement("div",{className:"navbar-dropdown"},Se.map((function(e){return ce.a.createElement("a",{className:"navbar-item",key:e.code,onClick:function(){t(e.code)}},e.name)})))};Re.propTypes={onChange:fe.a.func.isRequired};var Te=Re,Ne=ce.a.createContext();function Ie(e){return(Ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ae(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Me(e){return(Me=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Pe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function De(e,t){return(De=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var qe=Ce.a.selected,Be=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(o=Me(t).call(this,e))||"object"!==Ie(o)&&"function"!=typeof o?Pe(r):o).state={showMenu:!1},n.onFBClick=n.onFBClick.bind(Pe(n)),n.onLogout=n.onLogout.bind(Pe(n)),n.toggleMobileMenu=n.toggleMobileMenu.bind(Pe(n)),n.onClickNav=n.onClickNav.bind(Pe(n)),n.onClickTitleIcon=n.onClickTitleIcon.bind(Pe(n)),n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&De(e,t)}(t,e),n=t,(r=[{key:"toggleMobileMenu",value:function(){this.setState({showMenu:!this.state.showMenu})}},{key:"onClickNav",value:function(){this.state.showMenu&&this.setState({showMenu:!1})}},{key:"onFBClick",value:function(e){e.preventDefault(),this.props.onOAuth(this.props.facebookUrl)}},{key:"onClickTitleIcon",value:function(){var e=this.props,t=e.onChangeCanvasDirection,n=e.showVertical;this.onClickNav(),t(!n)}},{key:"onLogout",value:function(){this.props.onLogout()}},{key:"render",value:function(){var e=this,t=this.props,n=t.url,r=t.detail,o=t.likeNum,a=t.showVertical,i=t.facebookUrl,c=Boolean(r),s=this.context,l="/popular"===n,u=n in{"/latest":!0,"/":!0},p="/like"===n,d=c&&r.get("img"),m=d||"//dkny.oss-cn-hangzhou.aliyuncs.com/2/icon.png";return ce.a.createElement("nav",{className:"navbar is-fixed-top",role:"navigation","aria-label":"main navigation"},ce.a.createElement("div",{className:"navbar-brand"},ce.a.createElement("div",{title:"click to rotate",className:"navbar-item ".concat(Ce.a.iconWrapper),onClick:this.onClickTitleIcon},ce.a.createElement("img",{src:m,className:"".concat(d||a?"":Ce.a.rotate),alt:"colorpk icon"})),ce.a.createElement("a",{role:"button",className:"navbar-burger burger","aria-label":"menu","aria-expanded":"false",onClick:this.toggleMobileMenu},ce.a.createElement("span",{"aria-hidden":"true"}),ce.a.createElement("span",{"aria-hidden":"true"}),ce.a.createElement("span",{"aria-hidden":"true"}))),ce.a.createElement("div",{className:"navbar-menu ".concat(this.state.showMenu?"is-active":"")},ce.a.createElement("div",{className:"navbar-start"},c?ce.a.createElement("div",{className:"navbar-item has-dropdown is-hoverable"},ce.a.createElement("a",{className:"navbar-link ".concat(["/like","/portfolio"].includes(n)?qe:"")},r.get("name")),ce.a.createElement("div",{className:"navbar-dropdown"},ce.a.createElement(_e.Link,{className:"navbar-item",to:"/portfolio",onClick:function(){e.onClickNav()}},s.profile),ce.a.createElement(_e.Link,{to:"/like",className:"navbar-item",onClick:function(){e.onClickNav()}},s.like),r.get("isadmin")&&ce.a.createElement(_e.Link,{to:"/adminpanel",className:"navbar-item",onClick:this.onClickNav},s.admin),ce.a.createElement("hr",{className:"navbar-divider"}),ce.a.createElement("a",{className:"navbar-item",onClick:function(t){t.preventDefault(),e.onLogout()}},s.logOut))):ce.a.createElement(_e.Link,{to:"/like",className:"navbar-item ".concat(p?qe:""),onClick:this.onClickNav},s.like,o>0&&" (".concat(o,")")),ce.a.createElement(_e.Link,{to:"/popular",className:"navbar-item ".concat(l?qe:""),onClick:this.onClickNav},s.popular),ce.a.createElement(_e.Link,{to:"/latest",className:"navbar-item ".concat(u?qe:""),onClick:this.onClickNav},s.latest),ce.a.createElement("div",{className:"navbar-item has-dropdown is-hoverable"},ce.a.createElement("a",{className:"navbar-link"},s.more),ce.a.createElement("div",{className:"navbar-dropdown"},ce.a.createElement("a",{className:"navbar-item",href:"//www.colorpk.com"},"ColorPK v2.0"),ce.a.createElement("a",{className:"navbar-item",href:"//www.colorpk.com/about"},s.about),ce.a.createElement("hr",{className:"navbar-divider"}),ce.a.createElement("a",{className:"navbar-item",href:"//github.com/im6/vp/issues"},s.reportIssue))),ce.a.createElement("div",{className:"navbar-item has-dropdown is-hoverable"},ce.a.createElement("a",{className:"navbar-link"},ce.a.createElement(Le,null),ce.a.createElement("span",{className:Ce.a.translationText},s.language)),ce.a.createElement(Te,{onChange:this.props.onChangeLang}))),ce.a.createElement("div",{className:"navbar-end"},ce.a.createElement("div",{className:"navbar-item"},ce.a.createElement("div",{className:"buttons"},ce.a.createElement(_e.Link,{to:"/new",className:"button is-primary",onClick:this.onClickNav},s.newColor),"  ",!c&&i&&ce.a.createElement("a",{className:"button is-info",onClick:this.onFBClick},s.fbLogin))))))}}])&&Ae(n.prototype,r),o&&Ae(n,o),t}(ce.a.Component);Be.propTypes={url:fe.a.string,detail:fe.a.object,facebookUrl:fe.a.string,likeNum:fe.a.number,showVertical:fe.a.bool,onLogout:fe.a.func.isRequired,onOAuth:fe.a.func.isRequired,onChangeLang:fe.a.func.isRequired,onChangeCanvasDirection:fe.a.func.isRequired},Be.contextType=Ne;var Fe=Be,Ue={},We=Object(_e.withRouter)(Object(le.connect)((function(e,t){var n=e.user,r=e.color,o=t.location,a=t.history;Ue.history=a;var i=o.pathname,c=n.get("detail"),s=n.get("facebookUrl");return{likeNum:r.get("liked").size,url:i,detail:c,facebookUrl:s,showVertical:r.get("showVertical")}}),(function(e){return{onOAuth:function(t){var n=Object(we.createAction)("user/onOAuth");e(n(t))},onLogout:function(){var t=Object(we.createAction)("user/logoff");e(t()),Ue.history.push("/")},onChangeLang:function(t){var n=Object(we.createAction)("user/setLanguage");e(n(t))},onChangeCanvasDirection:function(t){var n=Object(we.createAction)("color/setDirection");e(n(t))}}}))(Fe)),Ve=(n(28),ce.a.memo((function(){return ce.a.createElement("div",{className:"spinContainer"},ce.a.createElement("div",{className:"spinLoader"}))})));function He(e){return(He="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ze(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Qe(e,t){return!t||"object"!==He(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Je(e){return(Je=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ye(e,t){return(Ye=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Ke=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Qe(this,Je(t).call(this,e))).state={showLoading:!0},n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ye(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){this.setState({showLoading:!1})}},{key:"render",value:function(){var e=this.state.showLoading,t=this.props.children;return ce.a.createElement("div",{className:Ee.a.container},ce.a.createElement(We,null),e?ce.a.createElement(Ve,null):t)}}])&&ze(n.prototype,r),o&&ze(n,o),t}(ce.a.Component);Ke.propTypes={children:fe.a.node};var Ge=Ke,Xe=Object(le.connect)((function(e){return{lang:e.user.get("lang")}}))((function(e){var t=e.lang,n=e.children,r=je[t]||je.en;return ce.a.createElement(Ne.Provider,{value:r},n)})),Ze=n(29),$e=Ze.keys().reduce((function(e,t){return e[t.replace(/\.js$/,"").replace(/^.\//,"")]=Ze(t).default,e}),{}),et=V.a.v1().substring(0,8),tt=function(e,t){var n=e.cookies,r=n.lang,o=n.canvas,a=Object(pe.createStore)(Object(pe.combineReducers)($e),{user:Object(se.fromJS)({detail:S(e)?{name:"loading",isadmin:R(e)}:null,facebookUrl:null,lang:r}),color:Object(se.fromJS)({loading:!0,showVertical:"1"===o,colorDef:{},liked:{},colorIdAllByDate:[],colorIdAllByLike:[],colorIdByMyOwn:[]})}),i=ce.a.createElement(ue.StaticRouter,{location:e.url},ce.a.createElement(le.Provider,{store:a},ce.a.createElement(Xe,null,ce.a.createElement(Ge,null)))),c=Object(de.renderToString)(i),s=ce.a.createElement(ye,{title:"".concat("ColorPK | Your Best Color Picker"),version:et,style:"".concat(w,"main.css"),script:"".concat(w,"main.js"),csrfToken:e.csrfToken(),lastBuildDate:"2/8/2020, 1:58:39 PM EST",initState:a.getState()},c),l=Object(de.renderToStaticMarkup)(s);t.status(200),t.send("<!DOCTYPE html>".concat(l))},nt=c()();nt.set("trust proxy",!0),nt.use(a()()),nt.use(l.a.json()),nt.use(l.a.urlencoded({extended:!1})),nt.use(p()()),nt.use(m()({name:"session",keys:[h],maxAge:2592e5,httpOnly:!0}));var rt=n(33).default;nt.get("/robots.txt",rt),nt.get("/favicon.ico",rt),nt.get("/sitemap.xml",rt),nt.get("/_ah/:action",(function(e,t){var n=e.params.action;t.json({status:"".concat(n," - ok")})})),nt.use((function(){for(var e=void 0,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];O()(n[0],"body._csrf",null)===g?(console.log("csrf exception"),n[2]()):B.apply(e,n)})),nt.post("/graphql",ae),nt.get("/auth/:oauth",I),["/","/latest","/popular","/color/:id","/new","/like"].forEach((function(e){nt.get(e,tt)})),nt.get("/portfolio",(function(e,t,n){S(e)?n():n(401)}),tt),nt.get("/adminpanel",(function(e,t,n){R(e)?n():n(403)}),tt),nt.use((function(e,t){console.error("Error: 404, ".concat(e.url," not found")),t.status(400).sendFile(D)})),nt.use((function(e,t,n,r){console.error("Error: ".concat(e.toString(),", ").concat(t.url)),"POST"===t.method?n.status(400).json({errors:!0}):n.status(400).sendFile(D)}));var ot=b||8080;nt.listen(ot,(function(){return console.log("app (mode: ".concat("production",") is running on: http://localhost:").concat(ot))})).timeout=5e3,Object(r.exec)("curl ifconfig.me",(function(e,t,n){e?console.error(n):console.log("public IP addr: ".concat(t))}))}]);