!function(e){var t={};function n(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(r,a,function(t){return e[t]}.bind(null,a));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/",n(n.s=22)}([function(e,t){e.exports=require("react")},function(e,t){e.exports=require("lodash.get")},function(e,t){e.exports=require("prop-types")},function(e,t){e.exports=require("graphql")},function(e,t){e.exports=require("uuid")},function(e,t){e.exports=require("path")},function(e,t){e.exports=require("body-parser")},function(e,t){e.exports=require("axios")},function(e,t){e.exports=require("react-dom/server")},function(e,t){e.exports=require("child_process")},function(e,t){e.exports=require("helmet")},function(e,t){e.exports=require("express")},function(e,t){e.exports=require("cookie-parser")},function(e,t){e.exports=require("cookie-session")},function(e,t){e.exports=require("csurf")},function(e,t){e.exports=require("express-graphql")},function(e,t){e.exports=require("mysql")},function(e,t){e.exports=require("react-router-dom")},function(e,t){e.exports=require("regenerator-runtime/runtime")},function(e,t){},function(e,t){},function(e,t,n){"use strict";n.r(t);var r=n(5),a=n.n(r),o=process.env.PWD,i=["/robots.txt","/sitemap.xml","/favicon.ico"].reduce((function(e,t){return e[t]=!0,e}),{});t.default=function(e,t,n){var r=e.url;if(Object.prototype.hasOwnProperty.call(i,r)){var s=a.a.resolve(o,"./dist".concat(r));t.sendFile(s)}else n(404)}},function(e,t,n){"use strict";n.r(t);var r=n(9),a=(n(18),n(10)),o=n.n(a),i=n(11),s=n.n(i),c=n(6),l=n.n(c),u=n(12),p=n.n(u),m=n(13),d=n.n(m);var f=process.env,h=f.PORT,g=f.SESSION_SECRET,b=f.CSRF_EXCEPTION,v=f.FB_APP_KEY,E=f.FB_APP_SECRET,k=f.FB_REDIRECT_URL,y="https://graph.facebook.com/v3.3",w="//dkny.oss-cn-hangzhou.aliyuncs.com/2/";b||console.log("No CSRF exception defined");var C=n(1),L=n.n(C),O=n(7),R=n.n(O),x=function(e){return"https://www.facebook.com/v3.3/dialog/oauth?client_id=".concat(v,"&response_type=code&state=").concat(e,"&redirect_uri=").concat(k)},S=function(e,t){return Boolean(L()(e,"session.app.isAuth",!1)&&(t||L()(e,"session.app.dbInfo.id",null)))},_=function(e){var t=L()(e,"session.app.tokenInfo.access_token",null);return"string"==typeof t&&t.length>0?t:null},N=function(e){return S(e)&&L()(e,"session.app.dbInfo.isAdmin",!1)};function T(e,t,n,r,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,a)}var I=function(e,t){var n=t.code;return{client_id:v,client_secret:E,code:n,redirect_uri:k}},P=function(){var e,t=(e=regeneratorRuntime.mark((function e(t,n){var r,a,o,i,s,c,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=L()(t,"query.code",null),a=L()(t,"query.state",null),o=L()(t,"params.oauth",null),i=L()(t,"session.app.oauthState",null),!r||!a||a!==i){e.next=14;break}return console.log("redirected by ".concat(o," auth...")),s=I(0,t.query),e.next=9,u=s,R()({baseURL:y,method:"get",url:"/oauth/access_token",params:u});case 9:c=e.sent,(l=c.data).access_token?t.session.app={oauth:o,isAuth:!0,tokenInfo:l}:t.session.app={isAuth:!1,authError:"get token failed."},e.next=16;break;case 14:console.log("inconsistant session, error msg in session"),t.session.app={isAuth:!1,authError:"Sorry, something error, please try again."};case 16:n.redirect("/");case 17:case"end":return e.stop()}var u}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){T(o,r,a,i,s,"next",e)}function s(e){T(o,r,a,i,s,"throw",e)}i(void 0)}))});return function(e,n){return t.apply(this,arguments)}}(),M=function(e,t,n){S(e)?n():n(401)},A=n(5),q=n.n(A),F=process.env.PWD,j=q.a.resolve(F,"./dist/error.html"),D=n(14),B=n.n(D)()(),U=n(15),H=n.n(U),W=n(4),Q=n.n(W),K=n(3),G=n(16),z=n.n(G),Y=process.env,V=Y.SQL_HOST,X=Y.SQL_PORT,J=Y.SQL_USERNAME,Z=Y.SQL_PASSWORD,$=Y.SQL_DATABASE,ee=z.a.createPool({connectionLimit:4,multipleStatements:!1,host:V,port:X,user:J,password:Z,database:$}),te=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return new Promise((function(n,r){ee.query(e,t,(function(e,t){e?(console.error(e),r(e)):n(t)}))}))};function ne(e,t,n,r,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,a)}function re(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){ne(o,r,a,i,s,"next",e)}function s(e){ne(o,r,a,i,s,"throw",e)}i(void 0)}))}}var ae,oe,ie,se,ce,le={auth:(ce=re(regeneratorRuntime.mark((function e(t,n){var r,a,o,i,s,c,l,u,p,m,d,f,h,g;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=_(n),!S(n,!0)||!r){e.next=33;break}return a={access_token:r,fields:"id,name,picture"},e.prev=3,e.next=6,t=a,R()({baseURL:y,method:"get",url:"/me",params:t});case 6:return o=e.sent,i=o.data,s=i.name,c=i.id,e.next=11,te("SELECT * FROM colorpk_user WHERE oauth = 'fb' AND oauthid = ?",[c]);case 11:if(1!==(l=e.sent).length){e.next=20;break}return u=l[0],p=u.isadmin,m=u.id,n.session.app.dbInfo={id:m,name:s,isAdmin:p||!1},e.next=17,te("SELECT color_id FROM colorpk_userlike WHERE user_id= ?",[m]);case 17:return d=e.sent,te("UPDATE colorpk_user SET lastlogin=NOW() WHERE id=?",[m]),e.abrupt("return",{__typename:"User",id:m,name:s,isadmin:p,img:L()(i,"picture.data.url",null),likes:d.map((function(e){return e.color_id}))});case 20:return e.next=22,te("INSERT INTO colorpk_user (oauth, name, oauthid, lastlogin) VALUES ('fb', ?, ?, NOW())",[s,c]);case 22:return f=e.sent,h=f.insertId,n.session.app.dbInfo={id:h,name:s,isAdmin:!1},e.abrupt("return",{__typename:"User",id:h,name:s,isadmin:!1,img:L()(i,"picture.data.url",null),likes:[]});case 28:return e.prev=28,e.t0=e.catch(3),e.abrupt("return",new K.GraphQLError(e.t0.toString()));case 31:e.next=36;break;case 33:return g=Q.a.v1(),n.session.app={oauthState:g},e.abrupt("return",{__typename:"AuthFailResponse",url:x(g),error:L()(n,"session.app.authError",null),status:0});case 36:case"end":return e.stop()}var t}),e,null,[[3,28]])}))),function(e,t){return ce.apply(this,arguments)}),color:(se=re(regeneratorRuntime.mark((function e(t,n){var r,a,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.category,S(n)||!(["LIKES","PROFILE"].indexOf(r)>-1)){e.next=3;break}return e.abrupt("return",new K.GraphQLError("color error: no user defined"));case 3:if(N(n)||"ANONYMOUS"!==r){e.next=5;break}return e.abrupt("return",new K.GraphQLError("color error: no admin access"));case 5:a=L()(n,"session.app.dbInfo.id",null),o=null,e.t0=r,e.next="PUBLIC"===e.t0?10:"LIKES"===e.t0?14:"PROFILE"===e.t0?18:"ANONYMOUS"===e.t0?22:26;break;case 10:return e.next=12,te("SELECT a.* FROM colorpk_color a WHERE a.display=0 ORDER BY `id` DESC");case 12:return o=e.sent,e.abrupt("break",27);case 14:return e.next=16,te("SELECT a.* FROM colorpk_color a\n          INNER JOIN \n          (SELECT color_id FROM colorpk_userlike WHERE user_id = ?) b\n          ON id = b.color_id",[a]);case 16:return o=e.sent,e.abrupt("break",27);case 18:return e.next=20,te("SELECT a.*, false as `liked` FROM colorpk_color a WHERE userid = ?",[a]);case 20:return o=e.sent,e.abrupt("break",27);case 22:return e.next=24,te("SELECT * FROM colorpk_color a WHERE a.display = 1");case 24:return o=e.sent,e.abrupt("break",27);case 26:return e.abrupt("break",27);case 27:return e.prev=27,e.abrupt("return",o.map((function(e){return{id:e.id,like:e.like,color:e.color,userid:e.userid,username:e.username,createdate:e.createdate}})));case 31:return e.prev=31,e.t1=e.catch(27),e.abrupt("return",new K.GraphQLError(e.t1.toString()));case 34:case"end":return e.stop()}}),e,null,[[27,31]])}))),function(e,t){return se.apply(this,arguments)}),likeColor:(ie=re(regeneratorRuntime.mark((function e(t,n){var r,a,o,i,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.input,a=r.id,o=r.willLike,e.prev=1,S(n)&&(i=L()(n,"session.app.dbInfo.id",null),te(o?"INSERT INTO colorpk_userlike (user_id, color_id) VALUES (?, ?)":"DELETE FROM colorpk_userlike WHERE user_id= ? AND color_id = ?",[i,a])),e.next=5,te("UPDATE colorpk_color SET `like` = `like` ".concat(o?"+":"-","  1 WHERE id = ?"),[a]);case 5:return s=e.sent,e.abrupt("return",{status:1===s.affectedRows?0:1});case 9:return e.prev=9,e.t0=e.catch(1),e.abrupt("return",new K.GraphQLError(e.t0.toString()));case 12:case"end":return e.stop()}}),e,null,[[1,9]])}))),function(e,t){return ie.apply(this,arguments)}),createColor:(oe=re(regeneratorRuntime.mark((function e(t,n){var r,a,o,i,s,c,l,u,p;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.input.color,a=S(n),o=L()(n,"session.app.dbInfo.name",null),i=L()(n,"session.app.dbInfo.id",null),c=(s=a&&o)?o:null,l=s?i:null,u=(10*Math.random()).toFixed(),27!==r.length){e.next=21;break}return e.prev=9,e.next=12,te("INSERT INTO colorpk_color (`like`, color, userid, username, colortype, display, createdate) VALUES (?, ?, ?, ?, NULL, ?, NOW())",[u,r,l,c,s?0:1]);case 12:return p=e.sent,e.abrupt("return",{status:0,data:p.insertId});case 16:return e.prev=16,e.t0=e.catch(9),e.abrupt("return",new K.GraphQLError(e.t0.toString()));case 19:e.next=22;break;case 21:return e.abrupt("return",new K.GraphQLError("create error: invalid color input"));case 22:case"end":return e.stop()}}),e,null,[[9,16]])}))),function(e,t){return oe.apply(this,arguments)}),adjudicateColor:(ae=re(regeneratorRuntime.mark((function e(t,n){var r,a,o,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(N(n)){e.next=2;break}return e.abrupt("return",new K.GraphQLError("adjudicate error: no admin access"));case 2:return r=t.input,a=r.id,o=r.willLike,e.prev=3,e.next=6,te(o?"UPDATE colorpk_color SET `display` = 0 WHERE id = ?":"DELETE FROM colorpk_color WHERE id = ?",[a]);case 6:return i=e.sent,e.abrupt("return",{status:1===i.affectedRows?0:1});case 10:return e.prev=10,e.t0=e.catch(3),e.abrupt("return",new K.GraphQLError(e.t0.toString()));case 13:case"end":return e.stop()}}),e,null,[[3,10]])}))),function(e,t){return ae.apply(this,arguments)}),logoff:function(e,t){var n=L()(t,"session.app.dbInfo.name","(unknown)");console.log("logoff ".concat(n,", delete session")),delete t.session.app;var r=Q.a.v1();return t.session.app={oauthState:r},{url:x(r)}}},ue=Object(K.buildSchema)("\n  enum ColorCategory {\n    PUBLIC\n    LIKES\n    PROFILE\n    ANONYMOUS\n  }\n\n  interface MutationResponse {\n    status: Int!\n  }\n\n  type Color {\n    id: ID!\n    like: Int!\n    color: String!\n    userid: Int\n    username: String\n    createdate: String\n  }\n\n  type User {\n    id: ID!\n    img: String\n    isadmin: Boolean\n    name: String\n    likes: [Int!]\n  }\n\n  input LikeColorInputType {\n    id: ID!\n    willLike: Boolean!\n  }\n  \n  input CreateColorInputType {\n    color: String!\n  }\n\n  type LikeColorOutputType implements MutationResponse {\n    status: Int!\n  }\n\n  type AdjudicateColorOutputType implements MutationResponse {\n    status: Int!\n  }\n\n  type CreateColorOutputType implements MutationResponse {\n    status: Int!\n    data: ID!\n  }\n\n  type AuthFailResponse implements MutationResponse {\n    status: Int!\n    url: String!\n    error: String\n  }\n\n  union AuthOutputType = User | AuthFailResponse\n\n  type Mutation {\n    likeColor(input: LikeColorInputType!): LikeColorOutputType\n    createColor(input: CreateColorInputType!): CreateColorOutputType\n    adjudicateColor(input: LikeColorInputType!): AdjudicateColorOutputType\n    logoff: AuthFailResponse\n  }\n  \n  type Query {\n    color(category: ColorCategory!): [Color]\n    auth: AuthOutputType\n  }\n\n  schema {\n    query: Query\n    mutation: Mutation\n  } \n"),pe=H()({schema:ue,rootValue:le,graphiql:!1,pretty:!1}),me=n(0),de=n.n(me),fe=n(8),he=n(2),ge=n.n(he),be=function(){return de.a.createElement(me.Fragment,null,de.a.createElement("meta",{property:"og:url",content:"https://react.colorpk.com"}),de.a.createElement("meta",{property:"og:site_name",content:"ColorPK v1"}),de.a.createElement("meta",{property:"og:title",content:"Your Best Color Picker"}),de.a.createElement("meta",{property:"og:description",content:"ColorPK - Faster lighter and nicer color palette | 全球最大色彩搭配网站 | 颜色搭配 | 艺术设计"}),de.a.createElement("meta",{property:"og:image",content:"http://dkny.oss-cn-hangzhou.aliyuncs.com/2/icon.png"}),de.a.createElement("meta",{property:"og:image:type",content:"image/png"}),de.a.createElement("meta",{property:"og:image:width",content:"1200"}),de.a.createElement("meta",{property:"og:image:height",content:"620"}),de.a.createElement("meta",{property:"twitter:site",content:"colorpk"}),de.a.createElement("meta",{property:"twitter:creator",content:"colorpk"}),de.a.createElement("meta",{property:"twitter:card",content:"summary_large_image"}),de.a.createElement("meta",{property:"twitter:title",content:"ColorPK"}),de.a.createElement("meta",{property:"twitter:description",content:"ColorPK - Faster lighter and nicer color palette | 全球最大色彩搭配网站 | 颜色搭配 | 艺术设计"}),de.a.createElement("meta",{property:"twitter:image:src",content:"http://dkny.oss-cn-hangzhou.aliyuncs.com/2/icon.png"}),de.a.createElement("meta",{property:"twitter:image:width",content:"1200"}),de.a.createElement("meta",{property:"twitter:image:height",content:"1200"}))},ve=function(e){var t=e.title,n=e.style,r=e.script,a=e.children,o=e.version,i=e.csrfToken,s=e.lastBuildDate;return de.a.createElement("html",{lang:"en"},de.a.createElement("head",null,de.a.createElement("meta",{charSet:"utf-8"}),de.a.createElement("meta",{httpEquiv:"X-UA-Compatible",content:"IE=edge"}),de.a.createElement(be,null),de.a.createElement("title",null,t),de.a.createElement("meta",{name:"description",content:"ColorPK | Faster lighter and nicer than colorhunt | 全球最大色彩搭配网站 | 颜色搭配 | 艺术设计"}),de.a.createElement("meta",{name:"viewport",content:"width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no"}),de.a.createElement("meta",{name:"robots",content:"INDEX,FOLLOW"}),de.a.createElement("meta",{name:"keywords",content:"colorpk, colorpicker, color picker, palette, color combination"}),de.a.createElement("link",{rel:"shortcut icon",href:"//dkny.oss-cn-hangzhou.aliyuncs.com/3/fav.ico"}),de.a.createElement("link",{href:"".concat(n,"?").concat(o),rel:"stylesheet"}),de.a.createElement("script",{dangerouslySetInnerHTML:{__html:"if(window.location.hostname.indexOf('colorpk.com') > -1){\n            (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':\n            new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],\n            j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=\n            'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);\n            })(window,document,'script','dataLayer','GTM-5LX6LV3');\n\n            var initLoadTime = Date.now();\n            window.addEventListener('_COLORPK_SCRIPT_READY', function(){\n              window.dataLayer.push({\n                'scriptLoadingTime': Date.now() - initLoadTime\n              });\n              console.log('server last build: ".concat(s,"');\n            });\n          }")}})),de.a.createElement("body",null,de.a.createElement("noscript",null,de.a.createElement("iframe",{src:"https://www.googletagmanager.com/ns.html?id=GTM-5LX6LV3",height:"0",width:"0",style:{display:"none",visibility:"hidden"}})),de.a.createElement("div",{id:"app",dangerouslySetInnerHTML:{__html:a}}),de.a.createElement("div",{id:"csrf","data-token":i}),de.a.createElement("script",{src:"".concat(r,"?").concat(o),type:"text/javascript"})))};ve.propTypes={title:ge.a.string.isRequired,lastBuildDate:ge.a.string.isRequired,version:ge.a.string.isRequired,style:ge.a.string.isRequired,script:ge.a.string.isRequired,children:ge.a.string.isRequired,csrfToken:ge.a.string.isRequired};var Ee=ve,ke=function(){},ye=(n(19),de.a.memo((function(){return de.a.createElement("div",{className:"spinContainer"},de.a.createElement("div",{className:"spinLoader"}))}))),we=n(17),Ce=(n(20),function(){return de.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24"},de.a.createElement("title",null,"translation"),de.a.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}),de.a.createElement("path",{d:" M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z "}))}),Le=[{code:"en",name:"English",data:{language:"Language",popular:"Popular",latest:"Latest",more:"More",about:"About",newColor:"New Color",fbLogin:"Facebook Login",reportIssue:"Report an issue",download:"Download",submit:"Submit",reset:"Reset",return:"Return",profile:"Profile",like:"Like",admin:"Admin",logOut:"Log Out",facebook:"FaceBook",twitter:"Twitter",email:"E-Mail"}},{code:"zh",name:"简体中文",data:{language:"多语言",popular:"最热",latest:"最新",more:"更多",about:"关于",newColor:"创建新颜色",fbLogin:"脸书账号登陆",reportIssue:"报告错误",download:"下载",submit:"添加",reset:"重置",return:"返回",profile:"我的颜色",like:"我的收藏",admin:"管理员",logOut:"注销",facebook:"脸书",twitter:"推特",email:"电邮"}},{code:"ja",name:"日本語",data:{language:"言語",popular:"人気のある",latest:"最新",more:"もっと",about:"約",newColor:"色をつくる",fbLogin:"Facebookでログイン",reportIssue:"問題を報告する",download:"ダウンロード",submit:"提出する",reset:"リセット",return:"戻る",profile:"プロフィール",like:"好む",admin:"管理者",logOut:"サインアウト",facebook:"FaceBook",twitter:"さえずり",email:"Eメール"}},{code:"ko",name:"한국어",data:{language:"언어",popular:"인기 있는",latest:"최근",more:"더",about:"약",newColor:"몹시 떠들어 대다",fbLogin:"페이스 북 로그인",reportIssue:"보고 문제",download:"다운로드",submit:"제출하다",reset:"다시 놓기",return:"반환",profile:"윤곽",like:"인기 있는 말",admin:"관리자",logOut:"로그 아웃하다",facebook:"페이스 북",twitter:"지저귀다",email:"이메일"}},{code:"es",name:"Español",data:{language:"idioma",popular:"popular",latest:"más reciente",more:"Más",about:"acerca de",newColor:"crear nuevo",fbLogin:"cuenta de Facebook",reportIssue:"informe de problema",download:"descargar",submit:"enviar",reset:"Reiniciar",return:"regreso",profile:"perfil",like:"favorita",admin:"administración",logOut:"cerrar sesión",facebook:"Facebook",twitter:"gorjeo",email:"correo electrónico"}},{code:"ru",name:"Русский",data:{language:"Переводы",popular:"популярный",latest:"недавно",more:"Больше",about:"около",newColor:"Создайте",fbLogin:"Логин в фейсбук",reportIssue:"сообщить о проблемах",download:"скачать",submit:"Отправить",reset:"сброс",return:"вернуть",profile:"профиль",like:"любимый",admin:"админ",logOut:"выйти",facebook:"Facebook",twitter:"щебет",email:"Эл. адрес"}}],Oe=Le.map((function(e){return{code:e.code,name:e.name}})),Re=Le.reduce((function(e,t){return e[t.code]=t.data,e}),{}),xe=function(e){var t=e.onChange;return de.a.createElement("div",{className:"navbar-dropdown"},Oe.map((function(e){return de.a.createElement("a",{className:"navbar-item",key:e.code,onClick:function(){t(e.code)}},e.name)})))};xe.propTypes={onChange:ge.a.func.isRequired};var Se=xe,_e=de.a.createContext(),Ne=function(e){var t=e.lang,n=e.children,r=Re[t]||Re.en;return de.a.createElement(_e.Provider,{value:r},n)};function Te(e){return(Te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ie(){return(Ie=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Pe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Me(e){return(Me=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ae(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function qe(e,t){return(qe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Fe=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(a=Me(t).call(this,e))||"object"!==Te(a)&&"function"!=typeof a?Ae(r):a).state={showMenu:!1},n.onFBClick=n.onFBClick.bind(Ae(n)),n.onLogout=n.onLogout.bind(Ae(n)),n.toggleMobileMenu=n.toggleMobileMenu.bind(Ae(n)),n.onClickNav=n.onClickNav.bind(Ae(n)),n.linkElem=n.props.ssr?"a":we.Link,n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&qe(e,t)}(t,e),n=t,(r=[{key:"hrefAttr",value:function(e){return this.props.ssr?{href:e}:{to:e}}},{key:"toggleMobileMenu",value:function(){this.setState({showMenu:!this.state.showMenu})}},{key:"onClickNav",value:function(){this.state.showMenu&&this.setState({showMenu:!1})}},{key:"onFBClick",value:function(e){e.preventDefault(),this.props.onOAuth(this.props.facebookUrl)}},{key:"onLogout",value:function(){this.props.onLogout()}},{key:"render",value:function(){var e=this,t=this.props,n=t.url,r=t.detail,a=t.facebookUrl,o=Boolean(r),i=this.context,s=this.linkElem,c="/popular"===n,l=n in{"/latest":!0,"/":!0},u=o?r.get("img"):"//dkny.oss-cn-hangzhou.aliyuncs.com/2/icon.png";return de.a.createElement("nav",{className:"navbar is-fixed-top",role:"navigation","aria-label":"main navigation"},de.a.createElement("div",{className:"navbar-brand"},de.a.createElement(s,Ie({className:"navbar-item"},this.hrefAttr("/"),{onClick:this.onClickNav}),de.a.createElement("img",{src:u,height:"32",width:"32",alt:"colorpk icon"})),de.a.createElement("a",{role:"button",className:"navbar-burger burger","aria-label":"menu","aria-expanded":"false",onClick:this.toggleMobileMenu},de.a.createElement("span",{"aria-hidden":"true"}),de.a.createElement("span",{"aria-hidden":"true"}),de.a.createElement("span",{"aria-hidden":"true"}))),de.a.createElement("div",{className:"navbar-menu ".concat(this.state.showMenu?"is-active":"")},de.a.createElement("div",{className:"navbar-start"},o&&de.a.createElement("div",{className:"navbar-item has-dropdown is-hoverable"},de.a.createElement("a",{className:"navbar-link ".concat(["/like","/portfolio"].includes(n)?"cpk-hs5eq":"")},r.get("name")),de.a.createElement("div",{className:"navbar-dropdown"},de.a.createElement(s,Ie({className:"navbar-item"},this.hrefAttr("/portfolio"),{onClick:function(){e.props.onEnterProfile("myPortfolio"),e.onClickNav()}}),i.profile),de.a.createElement(s,Ie({className:"navbar-item"},this.hrefAttr("/like"),{onClick:function(){e.props.onEnterProfile("myLiked"),e.onClickNav()}}),i.like),r.get("isadmin")&&de.a.createElement(s,Ie({className:"navbar-item"},this.hrefAttr("/adminpanel"),{onClick:this.onClickNav}),i.admin),de.a.createElement("hr",{className:"navbar-divider"}),de.a.createElement("a",{className:"navbar-item",onClick:function(t){t.preventDefault(),e.onLogout()}},i.logOut))),de.a.createElement(s,Ie({},this.hrefAttr("/popular"),{className:"navbar-item ".concat(c?"cpk-hs5eq":""),onClick:this.onClickNav}),i.popular),de.a.createElement(s,Ie({},this.hrefAttr("/latest"),{className:"navbar-item ".concat(l?"cpk-hs5eq":""),onClick:this.onClickNav}),i.latest),de.a.createElement("div",{className:"navbar-item has-dropdown is-hoverable"},de.a.createElement("a",{className:"navbar-link"},i.more),de.a.createElement("div",{className:"navbar-dropdown"},de.a.createElement("a",{className:"navbar-item",href:"//www.colorpk.com"},"ColorPK v2.0"),de.a.createElement("a",{className:"navbar-item",href:"//www.colorpk.com/about"},i.about),de.a.createElement("hr",{className:"navbar-divider"}),de.a.createElement("a",{className:"navbar-item",href:"//github.com/im6/vp/issues"},i.reportIssue))),de.a.createElement("div",{className:"navbar-item has-dropdown is-hoverable"},de.a.createElement("a",{className:"navbar-link"},de.a.createElement(Ce,null),de.a.createElement("span",{className:"cpk-dc2am"},i.language)),de.a.createElement(Se,{onChange:this.props.onChangeLang}))),de.a.createElement("div",{className:"navbar-end"},de.a.createElement("div",{className:"navbar-item"},de.a.createElement("div",{className:"buttons"},de.a.createElement(s,Ie({},this.hrefAttr("/new"),{className:"button is-primary",onClick:this.onClickNav}),i.newColor),"  ",!o&&a&&de.a.createElement("a",{className:"button is-info",onClick:this.onFBClick},i.fbLogin))))))}}])&&Pe(n.prototype,r),a&&Pe(n,a),t}(de.a.Component);Fe.propTypes={ssr:ge.a.bool,url:ge.a.string,detail:ge.a.object,facebookUrl:ge.a.string,onLogout:ge.a.func.isRequired,onOAuth:ge.a.func.isRequired,onChangeLang:ge.a.func.isRequired,onEnterProfile:ge.a.func.isRequired},Fe.contextType=_e;var je=Fe,De=function(e){var t=e.url;return de.a.createElement("div",{className:"cpk-i3de6"},de.a.createElement(je,{ssr:!0,url:t,onChange:ke,onLogout:ke,onOAuth:ke,onEnterProfile:ke,onChangeLang:ke}),de.a.createElement(ye,null))};De.propTypes={url:ge.a.string.isRequired},De.contextType=_e;var Be=De,Ue=Q.a.v1().substring(0,8),He=function(e,t){var n=de.a.createElement(Ne,{lang:e.cookies.lang},de.a.createElement(Be,{url:e.path})),r=Object(fe.renderToString)(n),a=de.a.createElement(Ee,{title:"".concat("ColorPK | Your Best Color Picker"),version:Ue,style:"".concat(w,"main.css"),script:"".concat(w,"main.js"),csrfToken:e.csrfToken(),lastBuildDate:"1/28/2020, 9:55:04 PM EST"},r),o=Object(fe.renderToStaticMarkup)(a);t.status(200),t.send("<!DOCTYPE html>".concat(o))},We=s()();We.set("trust proxy",!0),We.use(o()()),We.use(l.a.json()),We.use(l.a.urlencoded({extended:!1})),We.use(p()()),We.use(d()({name:"session",keys:[g],maxAge:2592e5,httpOnly:!0}));var Qe=n(21).default;We.get("/robots.txt",Qe),We.get("/favicon.ico",Qe),We.get("/sitemap.xml",Qe),We.get("/_ah/start",(function(e,t){t.json({status:"ok"})})),We.use((function(){for(var e=void 0,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];L()(n[0],"body._csrf",null)===b?(console.log("csrf exception"),n[2]()):B.apply(e,n)})),We.post("/graphql",pe),We.get("/auth/:oauth",P),["/","/latest","/popular","/color/:colorId","/new"].forEach((function(e){We.get(e,He)})),We.get("/like",M,He),We.get("/portfolio",M,He),We.get("/adminpanel",(function(e,t,n){N(e)?n():n(403)}),He),We.use((function(e,t){console.error("Error: 404, ".concat(e.url," not found")),t.status(400).sendFile(j)})),We.use((function(e,t,n,r){console.error("Error: ".concat(e.toString(),", ").concat(t.url)),"POST"===t.method?n.status(400).json({errors:!0}):n.status(400).sendFile(j)}));var Ke=h||8080;We.listen(Ke,(function(){return console.log("app (mode: ".concat("production",") is running on: http://localhost:").concat(Ke))})).timeout=5e3,Object(r.exec)("curl ifconfig.me",(function(e,t,n){e?console.error(n):console.log("public IP addr: ".concat(t))}))}]);