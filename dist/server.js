!function(e){var t={},n={1:0};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.e=function(t){if(0!==n[t]){var r=require("./"+t+".server.js"),o=r.modules,a=r.ids;for(var i in o)e[i]=o[i];for(var c=0;c<a.length;c++)n[a[c]]=0}return Promise.all([])},r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/",r.oe=function(e){process.nextTick((function(){throw e}))},r(r.s=42)}([function(e,t){e.exports=require("react")},function(e,t){e.exports=require("prop-types")},function(e,t){e.exports=require("lodash.get")},function(e,t){e.exports=require("redux-actions")},function(e,t){e.exports=require("immutable")},function(e,t){e.exports=require("react-router-dom")},function(e,t){e.exports=require("graphql")},function(e,t){e.exports=require("react-redux")},function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return c}));var r=n(0),o=n.n(r),a=n(10),i=o.a.createContext(),c=function(e){var t=e.lang,n=e.children,r=a.b[t]||a.b.en;return o.a.createElement(i.Provider,{value:r},n)}},function(e,t){e.exports=require("uuid")},function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return a}));var r=[{code:"en",name:"English",data:{language:"Language",popular:"Popular",latest:"Latest",more:"More",about:"About",newColor:"New Color",fbLogin:"Facebook Login",reportIssue:"Report an issue",download:"Download",submit:"Submit",reset:"Reset",return:"Return",profile:"Profile",like:"Like",admin:"Admin",logOut:"Log Out",facebook:"FaceBook",twitter:"Twitter",email:"E-Mail"}},{code:"zh",name:"简体中文",data:{language:"多语言",popular:"最热",latest:"最新",more:"更多",about:"关于",newColor:"创建新颜色",fbLogin:"脸书账号登陆",reportIssue:"报告错误",download:"下载",submit:"添加",reset:"重置",return:"返回",profile:"我的颜色",like:"我的收藏",admin:"管理员",logOut:"注销",facebook:"脸书",twitter:"推特",email:"电邮"}},{code:"ja",name:"日本語",data:{language:"言語",popular:"人気のある",latest:"最新",more:"もっと",about:"約",newColor:"色をつくる",fbLogin:"Facebookでログイン",reportIssue:"問題を報告する",download:"ダウンロード",submit:"提出する",reset:"リセット",return:"戻る",profile:"プロフィール",like:"好む",admin:"管理者",logOut:"サインアウト",facebook:"FaceBook",twitter:"さえずり",email:"Eメール"}},{code:"ko",name:"한국어",data:{language:"언어",popular:"인기 있는",latest:"최근",more:"더",about:"약",newColor:"몹시 떠들어 대다",fbLogin:"페이스 북 로그인",reportIssue:"보고 문제",download:"다운로드",submit:"제출하다",reset:"다시 놓기",return:"반환",profile:"윤곽",like:"인기 있는 말",admin:"관리자",logOut:"로그 아웃하다",facebook:"페이스 북",twitter:"지저귀다",email:"이메일"}},{code:"es",name:"Español",data:{language:"idioma",popular:"popular",latest:"más reciente",more:"Más",about:"acerca de",newColor:"crear nuevo",fbLogin:"cuenta de Facebook",reportIssue:"informe de problema",download:"descargar",submit:"enviar",reset:"Reiniciar",return:"regreso",profile:"perfil",like:"favorita",admin:"administración",logOut:"cerrar sesión",facebook:"Facebook",twitter:"gorjeo",email:"correo electrónico"}},{code:"ru",name:"Русский",data:{language:"Переводы",popular:"популярный",latest:"недавно",more:"Больше",about:"около",newColor:"Создайте",fbLogin:"Логин в фейсбук",reportIssue:"сообщить о проблемах",download:"скачать",submit:"Отправить",reset:"сброс",return:"вернуть",profile:"профиль",like:"любимый",admin:"админ",logOut:"выйти",facebook:"Facebook",twitter:"щебет",email:"Эл. адрес"}}],o=r.map((function(e){return{code:e.code,name:e.name}})),a=r.reduce((function(e,t){return e[t.code]=t.data,e}),{})},function(e,t){e.exports=require("path")},function(e,t){e.exports={center:"_2dNHo",shareGroup:"_3S_yP"}},function(e,t){e.exports=require("body-parser")},function(e,t){e.exports=require("axios")},function(e,t){e.exports=require("redux")},function(e,t){e.exports=require("react-dom/server")},function(e,t){e.exports={red:"_1Rvdv",grey:"_3-Ry5"}},function(e,t){e.exports={boxCanvas:"_2uqpR",boxCanvas1:"RsAZW"}},function(e,t){e.exports={rowContainer:"_2oMwE",text:"i_qcy"}},function(e,t){e.exports={list:"e22sE",container:"_32ugw"}},function(e,t){e.exports={selected:"_3Vq2K",translationText:"_3Lcio"}},function(e,t){e.exports=require("child_process")},function(e,t){e.exports=require("helmet")},function(e,t){e.exports=require("express")},function(e,t){e.exports=require("cookie-parser")},function(e,t){e.exports=require("cookie-session")},function(e,t){e.exports=require("csurf")},function(e,t){e.exports=require("express-graphql")},function(e,t){e.exports=require("mysql")},function(e,t){e.exports=require("react-router")},function(e,t){e.exports={box:"_2RWXF"}},function(e,t){e.exports={container:"_1ZBMk"}},function(e,t){e.exports=require("js-cookie")},function(e,t){e.exports=require("regenerator-runtime/runtime")},function(e,t){e.exports={spinContainer:"_3Vbkh",spinLoader:"_3Kppt","spinLoader-spin":"_3CdIW","spinLoader-normal-opacity":"j3l7M"}},function(e,t){e.exports={button:"oqsLb","navbar-link":"_2sc0r","is-arrowless":"_1GX7u","is-loading":"UKbME",spinAround:"_2FTK0","is-focused":"_3Y3m7","is-active":"saVcv",icon:"_23UdZ","is-small":"_1UslG","is-medium":"ukT2h","is-large":"_2Unmu","is-hovered":"NhgUA","is-text":"_2zQ8M","is-white":"_3xUUj","is-inverted":"_17-0d","is-outlined":"_1OhLM","is-black":"_2oMRl","is-light":"_3Xs1m","is-dark":"_3YZ-3","is-primary":"_1c2jg","is-link":"_2E9me","is-info":"_38xH5","is-success":"_3DVdg","is-warning":"_38unV","is-danger":"_1MeYG","is-normal":"_3LG9E","is-fullwidth":"_1WtLb","is-static":"_37VUy","is-rounded":"_2x_fh",buttons:"_3xgIo","are-small":"t9-Tf","are-medium":"_6D8S2","are-large":"_305kE","has-addons":"_1aoJb","is-selected":"VI5ru","is-expanded":"_5Ep-6","is-centered":"qeBp0","is-right":"_2J75n",navbar:"_2cVOp","navbar-brand":"_3AoP6","navbar-item":"_27nxB","navbar-burger":"zEaQ-","navbar-start":"_2CeYl","navbar-end":"_2lFl3","has-dropdown":"_2AAok","navbar-dropdown":"_11xr7",container:"UPfVo","has-shadow":"_39LtO","is-fixed-bottom":"_3Mk8g","is-fixed-top":"_1kX-L","has-navbar-fixed-top":"_2SRHd","has-navbar-fixed-bottom":"_2l5_V","navbar-tabs":"_3K_3E","navbar-menu":"q6ehE","is-tab":"_11ZHk","navbar-content":"_3Hca5","navbar-divider":"_3xW9y","is-fixed-bottom-touch":"_2Hu0t","is-fixed-top-touch":"_3-l5b","has-navbar-fixed-top-touch":"_2bjkv","has-navbar-fixed-bottom-touch":"_2lpu9","is-spaced":"_2L_DH","is-transparent":"XCdR1","is-hoverable":"fY-Y4","has-dropdown-up":"dE4dn","is-boxed":"_1Cku-","is-fixed-bottom-desktop":"_1GnEu","is-fixed-top-desktop":"_3HKwg","has-navbar-fixed-top-desktop":"_1IAQA","has-navbar-fixed-bottom-desktop":"GJ0q4","has-spaced-navbar-fixed-top":"_20Shv","has-spaced-navbar-fixed-bottom":"_1aKcL",hero:"_2px4c","is-fullheight-with-navbar":"_3vxo2"}},function(e,t,n){var r={"./admin.js":38,"./color.js":39,"./user.js":40};function o(e){var t=a(e);return n(t)}function a(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}o.keys=function(){return Object.keys(r)},o.resolve=a,e.exports=o,o.id=37},function(e,t,n){"use strict";n.r(t);var r,o=n(3),a=n(4),i=n.n(a);function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var l=i.a.fromJS({list:[],loading:!1}),u=Object(o.handleActions)((c(r={},"admin/getList",(function(e){return e.set("loading",!0)})),c(r,"admin/getList/success",(function(e,t){return e.merge({loading:!1,list:i.a.fromJS(t.payload)})})),c(r,"admin/getList/fail",(function(e,t){return e.merge({list:i.a.fromJS([]),loading:!1})})),c(r,"admin/decideColor/success",(function(e,t){return(e=e.updateIn(["list"],(function(e){return e.filter((function(e){return e.get("id")!==t.payload}))}))).set("loading",!1)})),r),l);t.default=u},function(e,t,n){"use strict";n.r(t);var r,o=n(3),a=n(4);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var c=Object(a.Map)({loading:!0,showVertical:(new Date).getHours()>15,colorDef:Object(a.Map)({}),liked:Object(a.Map)({}),colorId:[],colorIdByLike:[],myPortfolio:[],myLiked:[]}),l=Object(o.handleActions)((i(r={},"color/get",(function(e){return e.set("loading",!0)})),i(r,"color/get/success",(function(e,t){var n=[],r={};t.payload.forEach((function(e){n.push(e.id.toString()),r[e.id]=e}));var o=t.payload.sort((function(e,t){return t.like-e.like})).map((function(e){return e.id.toString()}));return e.merge({colorId:n,colorIdByLike:o,colorDef:Object(a.fromJS)(r),loading:!1})})),i(r,"color/get/fail",(function(e){return e.merge({colorId:[],loading:!1})})),i(r,"color/toggleLike",(function(e,t){var n=t.payload,r=n.willLike,o=n.id;return e=(e=e.setIn(["liked",o],r)).updateIn(["colorDef",o,"like"],(function(e){return e+(r?1:-1)})),r||(e=e.updateIn(["myLiked"],(function(e){return e.filter((function(e){return e!==o}))}))),e})),i(r,"color/addNew/success",(function(e,t){var n=t.payload.id;return e=(e=e.setIn(["colorDef",n],Object(a.fromJS)(t.payload))).updateIn(["colorId"],(function(e){return e.unshift(n),e}))})),i(r,"color/getUserColor",(function(e,t){return(e=e.set(t.payload,[])).set("loading",!0)})),i(r,"color/getUserColor/success",(function(e,t){var n=[];return t.payload.data.forEach((function(t){var r=t.id.toString();n.push(r),e.getIn(["colorDef",r])||(e=e.setIn(["colorDef",r],Object(a.fromJS)(t)))})),(e=e.set(t.payload.name,n)).set("loading",!1)})),i(r,"color/getUserColor/fail",(function(e,t){return(e=e.set("loading",!1)).set(t.payload.name,[])})),i(r,"color/set/likes",(function(e,t){var n=t.payload.reduce((function(e,t){return e[t]=!0,e}),{});return e.set("liked",Object(a.fromJS)(n))})),r),c);t.default=l},function(e,t,n){"use strict";n.r(t);var r,o=n(3),a=n(4),i=n(33),c=n.n(i);function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var u=Object(a.fromJS)({detail:null,facebookUrl:null,lang:c.a.get("lang")}),s=Object(o.handleActions)((l(r={},"user/auth/success",(function(e,t){var n=t.payload;return e.merge({detail:Object(a.fromJS)(n),facebookUrl:null})})),l(r,"user/auth/fail",(function(e,t){var n=t.payload;return e.merge({detail:null,facebookUrl:n})})),l(r,"user/logoff",(function(e){return e.merge({detail:null,facebookUrl:null})})),l(r,"user/setLanguage",(function(e,t){var n=t.payload;return e.set("lang",n)})),r),u);t.default=s},function(e,t,n){"use strict";n.r(t);var r=n(11),o=n.n(r),a=process.env.PWD,i=["/robots.txt","/sitemap.xml","/favicon.ico"].reduce((function(e,t){return e[t]=!0,e}),{});t.default=function(e,t,n){var r=e.url;if(Object.prototype.hasOwnProperty.call(i,r)){var c=o.a.resolve(a,"./dist".concat(r));t.sendFile(c)}else n(404)}},function(e,t,n){"use strict";n.r(t);var r=n(22),o=(n(34),n(23)),a=n.n(o),i=n(24),c=n.n(i),l=n(13),u=n.n(l),s=n(25),p=n.n(s),d=n(26),f=n.n(d);var m=process.env,b=m.PORT,h=m.SESSION_SECRET,g=m.CSRF_EXCEPTION,v=m.FB_APP_KEY,y=m.FB_APP_SECRET,k=m.FB_REDIRECT_URL,E="https://graph.facebook.com/v3.3",w="//dkny.oss-cn-hangzhou.aliyuncs.com/2/";g||console.log("No CSRF exception defined");var _=n(2),C=n.n(_),O=n(14),x=n.n(O),L=function(e){return"https://www.facebook.com/v3.3/dialog/oauth?client_id=".concat(v,"&response_type=code&state=").concat(e,"&redirect_uri=").concat(k)},S=function(e,t){return Boolean(C()(e,"session.app.isAuth",!1)&&(t||C()(e,"session.app.dbInfo.id",null)))},R=function(e){var t=C()(e,"session.app.tokenInfo.access_token",null);return"string"==typeof t&&t.length>0?t:null},j=function(e){return S(e)&&C()(e,"session.app.dbInfo.isAdmin",!1)};function I(e,t,n,r,o,a,i){try{var c=e[a](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,o)}var N=function(e,t){var n=t.code;return{client_id:v,client_secret:y,code:n,redirect_uri:k}},T=function(){var e,t=(e=regeneratorRuntime.mark((function e(t,n){var r,o,a,i,c,l,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=C()(t,"query.code",null),o=C()(t,"query.state",null),a=C()(t,"params.oauth",null),i=C()(t,"session.app.oauthState",null),!r||!o||o!==i){e.next=14;break}return console.log("redirected by ".concat(a," auth...")),c=N(0,t.query),e.next=9,s=c,x()({baseURL:E,method:"get",url:"/oauth/access_token",params:s});case 9:l=e.sent,(u=l.data).access_token?t.session.app={oauth:a,isAuth:!0,tokenInfo:u}:t.session.app={isAuth:!1,authError:"get token failed."},e.next=16;break;case 14:console.log("inconsistant session, error msg in session"),t.session.app={isAuth:!1,authError:"Sorry, something error, please try again."};case 16:n.redirect("/");case 17:case"end":return e.stop()}var s}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){I(a,r,o,i,c,"next",e)}function c(e){I(a,r,o,i,c,"throw",e)}i(void 0)}))});return function(e,n){return t.apply(this,arguments)}}(),P=function(e,t,n){S(e)?n():n(401)},A=n(11),q=n.n(A),M=process.env.PWD,D=q.a.resolve(M,"./dist/error.html"),U=n(27),F=n.n(U)()(),B=n(28),H=n.n(B),V=n(9),W=n.n(V),G=n(6),K=n(29),Q=n.n(K),Y=process.env,z=Y.SQL_HOST,J=Y.SQL_PORT,X=Y.SQL_USERNAME,Z=Y.SQL_PASSWORD,$=Y.SQL_DATABASE,ee=Q.a.createPool({connectionLimit:4,multipleStatements:!1,host:z,port:J,user:X,password:Z,database:$}),te=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return new Promise((function(n,r){ee.query(e,t,(function(e,t){e?(console.error(e),r(e)):n(t)}))}))};function ne(e,t,n,r,o,a,i){try{var c=e[a](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,o)}function re(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){ne(a,r,o,i,c,"next",e)}function c(e){ne(a,r,o,i,c,"throw",e)}i(void 0)}))}}var oe,ae,ie,ce,le,ue={auth:(le=re(regeneratorRuntime.mark((function e(t,n){var r,o,a,i,c,l,u,s,p,d,f,m,b,h;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=R(n),!S(n,!0)||!r){e.next=33;break}return o={access_token:r,fields:"id,name,picture"},e.prev=3,e.next=6,t=o,x()({baseURL:E,method:"get",url:"/me",params:t});case 6:return a=e.sent,i=a.data,c=i.name,l=i.id,e.next=11,te("SELECT * FROM colorpk_user WHERE oauth = 'fb' AND oauthid = ?",[l]);case 11:if(1!==(u=e.sent).length){e.next=20;break}return s=u[0],p=s.isadmin,d=s.id,n.session.app.dbInfo={id:d,name:c,isAdmin:p||!1},e.next=17,te("SELECT color_id FROM colorpk_userlike WHERE user_id= ?",[d]);case 17:return f=e.sent,te("UPDATE colorpk_user SET lastlogin=NOW() WHERE id=?",[d]),e.abrupt("return",{__typename:"User",id:d,name:c,isadmin:p,img:C()(i,"picture.data.url",null),likes:f.map((function(e){return e.color_id}))});case 20:return e.next=22,te("INSERT INTO colorpk_user (oauth, name, oauthid, lastlogin) VALUES ('fb', ?, ?, NOW())",[c,l]);case 22:return m=e.sent,b=m.insertId,n.session.app.dbInfo={id:b,name:c,isAdmin:!1},e.abrupt("return",{__typename:"User",id:b,name:c,isadmin:!1,img:C()(i,"picture.data.url",null),likes:[]});case 28:return e.prev=28,e.t0=e.catch(3),e.abrupt("return",new G.GraphQLError(e.t0.toString()));case 31:e.next=36;break;case 33:return h=W.a.v1(),n.session.app={oauthState:h},e.abrupt("return",{__typename:"AuthFailResponse",url:L(h),error:C()(n,"session.app.authError",null),status:0});case 36:case"end":return e.stop()}var t}),e,null,[[3,28]])}))),function(e,t){return le.apply(this,arguments)}),color:(ce=re(regeneratorRuntime.mark((function e(t,n){var r,o,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.category,S(n)||!(["LIKES","PROFILE"].indexOf(r)>-1)){e.next=3;break}return e.abrupt("return",new G.GraphQLError("color error: no user defined"));case 3:if(j(n)||"ANONYMOUS"!==r){e.next=5;break}return e.abrupt("return",new G.GraphQLError("color error: no admin access"));case 5:o=C()(n,"session.app.dbInfo.id",null),a=null,e.t0=r,e.next="PUBLIC"===e.t0?10:"LIKES"===e.t0?14:"PROFILE"===e.t0?18:"ANONYMOUS"===e.t0?22:26;break;case 10:return e.next=12,te("SELECT a.* FROM colorpk_color a WHERE a.display=0 ORDER BY `id` DESC");case 12:return a=e.sent,e.abrupt("break",27);case 14:return e.next=16,te("SELECT a.* FROM colorpk_color a\n          INNER JOIN \n          (SELECT color_id FROM colorpk_userlike WHERE user_id = ?) b\n          ON id = b.color_id",[o]);case 16:return a=e.sent,e.abrupt("break",27);case 18:return e.next=20,te("SELECT a.*, false as `liked` FROM colorpk_color a WHERE userid = ?",[o]);case 20:return a=e.sent,e.abrupt("break",27);case 22:return e.next=24,te("SELECT * FROM colorpk_color a WHERE a.display = 1");case 24:return a=e.sent,e.abrupt("break",27);case 26:return e.abrupt("break",27);case 27:return e.prev=27,e.abrupt("return",a.map((function(e){return{id:e.id,like:e.like,color:e.color,userid:e.userid,username:e.username,createdate:e.createdate}})));case 31:return e.prev=31,e.t1=e.catch(27),e.abrupt("return",new G.GraphQLError(e.t1.toString()));case 34:case"end":return e.stop()}}),e,null,[[27,31]])}))),function(e,t){return ce.apply(this,arguments)}),likeColor:(ie=re(regeneratorRuntime.mark((function e(t,n){var r,o,a,i,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.input,o=r.id,a=r.willLike,e.prev=1,S(n)&&(i=C()(n,"session.app.dbInfo.id",null),te(a?"INSERT INTO colorpk_userlike (user_id, color_id) VALUES (?, ?)":"DELETE FROM colorpk_userlike WHERE user_id= ? AND color_id = ?",[i,o])),e.next=5,te("UPDATE colorpk_color SET `like` = `like` ".concat(a?"+":"-","  1 WHERE id = ?"),[o]);case 5:return c=e.sent,e.abrupt("return",{status:1===c.affectedRows?0:1});case 9:return e.prev=9,e.t0=e.catch(1),e.abrupt("return",new G.GraphQLError(e.t0.toString()));case 12:case"end":return e.stop()}}),e,null,[[1,9]])}))),function(e,t){return ie.apply(this,arguments)}),createColor:(ae=re(regeneratorRuntime.mark((function e(t,n){var r,o,a,i,c,l,u,s,p;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.input.color,o=S(n),a=C()(n,"session.app.dbInfo.name",null),i=C()(n,"session.app.dbInfo.id",null),l=(c=o&&a)?a:null,u=c?i:null,s=(10*Math.random()).toFixed(),27!==r.length){e.next=21;break}return e.prev=9,e.next=12,te("INSERT INTO colorpk_color (`like`, color, userid, username, colortype, display, createdate) VALUES (?, ?, ?, ?, NULL, ?, NOW())",[s,r,u,l,c?0:1]);case 12:return p=e.sent,e.abrupt("return",{status:0,data:p.insertId});case 16:return e.prev=16,e.t0=e.catch(9),e.abrupt("return",new G.GraphQLError(e.t0.toString()));case 19:e.next=22;break;case 21:return e.abrupt("return",new G.GraphQLError("create error: invalid color input"));case 22:case"end":return e.stop()}}),e,null,[[9,16]])}))),function(e,t){return ae.apply(this,arguments)}),adjudicateColor:(oe=re(regeneratorRuntime.mark((function e(t,n){var r,o,a,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(j(n)){e.next=2;break}return e.abrupt("return",new G.GraphQLError("adjudicate error: no admin access"));case 2:return r=t.input,o=r.id,a=r.willLike,e.prev=3,e.next=6,te(a?"UPDATE colorpk_color SET `display` = 0 WHERE id = ?":"DELETE FROM colorpk_color WHERE id = ?",[o]);case 6:return i=e.sent,e.abrupt("return",{status:1===i.affectedRows?0:1});case 10:return e.prev=10,e.t0=e.catch(3),e.abrupt("return",new G.GraphQLError(e.t0.toString()));case 13:case"end":return e.stop()}}),e,null,[[3,10]])}))),function(e,t){return oe.apply(this,arguments)}),logoff:function(e,t){var n=C()(t,"session.app.dbInfo.name","(unknown)");console.log("logoff ".concat(n,", delete session")),delete t.session.app;var r=W.a.v1();return t.session.app={oauthState:r},{url:L(r)}}},se=Object(G.buildSchema)("\n  enum ColorCategory {\n    PUBLIC\n    LIKES\n    PROFILE\n    ANONYMOUS\n  }\n\n  interface MutationResponse {\n    status: Int!\n  }\n\n  type Color {\n    id: ID!\n    like: Int!\n    color: String!\n    userid: Int\n    username: String\n    createdate: String\n  }\n\n  type User {\n    id: ID!\n    img: String\n    isadmin: Boolean\n    name: String\n    likes: [Int!]\n  }\n\n  input LikeColorInputType {\n    id: ID!\n    willLike: Boolean!\n  }\n  \n  input CreateColorInputType {\n    color: String!\n  }\n\n  type LikeColorOutputType implements MutationResponse {\n    status: Int!\n  }\n\n  type AdjudicateColorOutputType implements MutationResponse {\n    status: Int!\n  }\n\n  type CreateColorOutputType implements MutationResponse {\n    status: Int!\n    data: ID!\n  }\n\n  type AuthFailResponse implements MutationResponse {\n    status: Int!\n    url: String!\n    error: String\n  }\n\n  union AuthOutputType = User | AuthFailResponse\n\n  type Mutation {\n    likeColor(input: LikeColorInputType!): LikeColorOutputType\n    createColor(input: CreateColorInputType!): CreateColorOutputType\n    adjudicateColor(input: LikeColorInputType!): AdjudicateColorOutputType\n    logoff: AuthFailResponse\n  }\n  \n  type Query {\n    color(category: ColorCategory!): [Color]\n    auth: AuthOutputType\n  }\n\n  schema {\n    query: Query\n    mutation: Mutation\n  } \n"),pe=H()({schema:se,rootValue:ue,graphiql:!1,pretty:!1}),de=n(0),fe=n.n(de),me=n(4),be=n(7),he=n(30),ge=n(15),ve=n(16),ye=n(1),ke=n.n(ye),Ee=function(){return fe.a.createElement(de.Fragment,null,fe.a.createElement("meta",{property:"og:url",content:"https://react.colorpk.com"}),fe.a.createElement("meta",{property:"og:site_name",content:"ColorPK v1"}),fe.a.createElement("meta",{property:"og:title",content:"Your Best Color Picker"}),fe.a.createElement("meta",{property:"og:description",content:"ColorPK - Faster lighter and nicer color palette | 全球最大色彩搭配网站 | 颜色搭配 | 艺术设计"}),fe.a.createElement("meta",{property:"og:image",content:"http://dkny.oss-cn-hangzhou.aliyuncs.com/2/icon.png"}),fe.a.createElement("meta",{property:"og:image:type",content:"image/png"}),fe.a.createElement("meta",{property:"og:image:width",content:"1200"}),fe.a.createElement("meta",{property:"og:image:height",content:"620"}),fe.a.createElement("meta",{property:"twitter:site",content:"colorpk"}),fe.a.createElement("meta",{property:"twitter:creator",content:"colorpk"}),fe.a.createElement("meta",{property:"twitter:card",content:"summary_large_image"}),fe.a.createElement("meta",{property:"twitter:title",content:"ColorPK"}),fe.a.createElement("meta",{property:"twitter:description",content:"ColorPK - Faster lighter and nicer color palette | 全球最大色彩搭配网站 | 颜色搭配 | 艺术设计"}),fe.a.createElement("meta",{property:"twitter:image:src",content:"http://dkny.oss-cn-hangzhou.aliyuncs.com/2/icon.png"}),fe.a.createElement("meta",{property:"twitter:image:width",content:"1200"}),fe.a.createElement("meta",{property:"twitter:image:height",content:"1200"}))},we=function(e){var t=e.title,n=e.style,r=e.script,o=e.children,a=e.version,i=e.csrfToken,c=e.lastBuildDate;return fe.a.createElement("html",{lang:"en"},fe.a.createElement("head",null,fe.a.createElement("meta",{charSet:"utf-8"}),fe.a.createElement("meta",{httpEquiv:"X-UA-Compatible",content:"IE=edge"}),fe.a.createElement(Ee,null),fe.a.createElement("title",null,t),fe.a.createElement("meta",{name:"description",content:"ColorPK | Faster lighter and nicer than colorhunt | 全球最大色彩搭配网站 | 颜色搭配 | 艺术设计"}),fe.a.createElement("meta",{name:"viewport",content:"width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no"}),fe.a.createElement("meta",{name:"robots",content:"INDEX,FOLLOW"}),fe.a.createElement("meta",{name:"keywords",content:"colorpk, colorpicker, color picker, palette, color combination"}),fe.a.createElement("link",{rel:"shortcut icon",href:"//dkny.oss-cn-hangzhou.aliyuncs.com/3/fav.ico"}),fe.a.createElement("link",{href:"".concat(n,"?").concat(a),rel:"stylesheet"}),fe.a.createElement("script",{dangerouslySetInnerHTML:{__html:"if(window.location.hostname.indexOf('colorpk.com') > -1){\n            (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':\n            new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],\n            j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=\n            'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);\n            })(window,document,'script','dataLayer','GTM-5LX6LV3');\n\n            var initLoadTime = Date.now();\n            window.addEventListener('_COLORPK_SCRIPT_READY', function(){\n              window.dataLayer.push({\n                'scriptLoadingTime': Date.now() - initLoadTime\n              });\n              console.log('server last build: ".concat(c,"');\n            });\n          }")}})),fe.a.createElement("body",null,fe.a.createElement("noscript",null,fe.a.createElement("iframe",{src:"https://www.googletagmanager.com/ns.html?id=GTM-5LX6LV3",height:"0",width:"0",style:{display:"none",visibility:"hidden"}})),fe.a.createElement("div",{id:"app",dangerouslySetInnerHTML:{__html:o}}),fe.a.createElement("div",{id:"csrf","data-token":i}),fe.a.createElement("script",{src:"".concat(r,"?").concat(a),type:"text/javascript"})))};we.propTypes={title:ke.a.string.isRequired,lastBuildDate:ke.a.string.isRequired,version:ke.a.string.isRequired,style:ke.a.string.isRequired,script:ke.a.string.isRequired,children:ke.a.string.isRequired,csrfToken:ke.a.string.isRequired};var _e=we,Ce=n(5),Oe=n(3),xe=n(31),Le=n.n(xe),Se=n(17),Re=n.n(Se),je=function(e){var t=e.red;return fe.a.createElement("svg",{height:"15",width:"15",viewBox:"0 0 48 48",xmlns:"http://www.w3.org/2000/svg"},fe.a.createElement("title",null,t?"Red Heart":"Grey Heart"),fe.a.createElement("path",{className:t?Re.a.red:Re.a.grey,d:"M4.95,26A13.46,13.46,0,0,1,24,6.94,13.46,13.46,0,0,1,43.05,26L24,45Z"}))};je.propTypes={red:ke.a.bool};var Ie=fe.a.memo(je),Ne=function(e){var t=e.liked,n=e.onToggle,r=e.likeNum;return fe.a.createElement("button",{className:"button is-small",onClick:n,"aria-label":"click and save"},fe.a.createElement(Ie,{red:t}),"  ",r)};Ne.propTypes={likeNum:ke.a.number.isRequired,liked:ke.a.bool,onToggle:ke.a.func.isRequired};var Te=Ne,Pe=n(18),Ae=n.n(Pe),qe=n(19),Me=n.n(qe),De=function(e){e.stopPropagation()},Ue=function(e){var t=e.color;return fe.a.createElement("li",{className:Me.a.rowContainer,style:{backgroundColor:t}},fe.a.createElement("h1",{className:Me.a.text,onClick:De},t))};Ue.propTypes={color:ke.a.string.isRequired};var Fe=Ue,Be=function(e){var t=e.onClick,n=e.colorValue,r=e.vertical;return fe.a.createElement("ul",{className:r?Ae.a.boxCanvas1:Ae.a.boxCanvas,onClick:t},n.split("#").map((function(e){return fe.a.createElement(Fe,{key:e,color:"#"+e})})))};Be.propTypes={colorValue:ke.a.string.isRequired,onClick:ke.a.func,vertical:ke.a.bool};var He=Be;function Ve(e){return(Ve="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function We(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ge(e){return(Ge=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ke(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Qe(e,t){return(Qe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Ye=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(o=Ge(t).call(this,e))||"object"!==Ve(o)&&"function"!=typeof o?Ke(r):o).onLikeClick=n.onLikeClick.bind(Ke(n)),n.onCanvasClick=n.onCanvasClick.bind(Ke(n)),n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Qe(e,t)}(t,e),n=t,(r=[{key:"shouldComponentUpdate",value:function(e){var t=this.props,n=t.liked,r=t.boxInfo,o=t.vertical;return e.liked!==n||e.boxInfo.get("id")!==r.get("id")||e.vertical!==o}},{key:"onLikeClick",value:function(){var e=this.props,t=e.liked,n=e.boxInfo,r=e.onLikeClick;r({willLike:!t,id:n.get("id")})}},{key:"onCanvasClick",value:function(){var e=this.props,t=e.boxInfo,n=e.onCanvasClick;n(t)}},{key:"render",value:function(){var e=this.props,t=e.liked,n=e.boxInfo,r=e.vertical,o=e.showUsername;return fe.a.createElement("div",{className:Le.a.box},fe.a.createElement(He,{vertical:r,colorValue:n.get("color"),onClick:this.onCanvasClick}),fe.a.createElement(Te,{liked:t,likeNum:n.get("like"),onToggle:this.onLikeClick}),o&&n.get("username")&&fe.a.createElement("p",null,n.get("username")))}}])&&We(n.prototype,r),o&&We(n,o),t}(fe.a.Component);Ye.propTypes={boxInfo:ke.a.object.isRequired,onLikeClick:ke.a.func.isRequired,onCanvasClick:ke.a.func.isRequired,liked:ke.a.bool,vertical:ke.a.bool,showUsername:ke.a.bool};var ze=Ye,Je=n(12),Xe=n.n(Je),Ze=n(8);function $e(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,o=!1,a=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==c.return||c.return()}finally{if(o)throw a}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var et=function(e){var t=e.liked,n=e.boxInfo,r=e.onLike,o=e.onShare,a=e.onDownload,i=Object(de.useContext)(Ze.a),c=$e(Object(de.useState)(!1),2),l=c[0],u=c[1];return fe.a.createElement("div",{className:Xe.a.center},fe.a.createElement("div",null,fe.a.createElement(ze,{vertical:l,liked:t,boxInfo:n,onLikeClick:r,onCanvasClick:function(){u(!l)},showUsername:!0}),fe.a.createElement("div",{className:Xe.a.center},fe.a.createElement("button",{onClick:function(){return a(n)},className:"button is-fullwidth is-info","aria-label":i.download},i.download)),fe.a.createElement("div",{className:"buttons has-addons is-centered ".concat(Xe.a.shareGroup)},fe.a.createElement("button",{className:"button",title:i.email,onClick:function(){o("email")}},i.email),fe.a.createElement("button",{className:"button",title:i.facebook,onClick:function(){o("facebook")}},i.facebook),fe.a.createElement("button",{className:"button",title:i.twitter,onClick:function(){o("twitter")}},i.twitter))))};et.propTypes={liked:ke.a.bool,boxInfo:ke.a.object.isRequired,onLike:ke.a.func.isRequired,onShare:ke.a.func.isRequired,onDownload:ke.a.func.isRequired};var tt=et,nt=n(20),rt=n.n(nt),ot=(n(35),fe.a.memo((function(){return fe.a.createElement("div",{className:"spinContainer"},fe.a.createElement("div",{className:"spinLoader"}))})));function at(e){return(at="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function it(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ct(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function lt(e,t){return!t||"object"!==at(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ut(e){return(ut=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function st(e,t){return(st=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var pt=function(e){function t(){return it(this,t),lt(this,ut(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&st(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){var e=this.props;(0,e.onInit)(e.match.url)}},{key:"render",value:function(){var e=this.props,t=e.list,n=e.liked,r=e.colorDef,o=e.hasSelected,a=e.selectedId,i=e.loading,c=e.vertical,l=e.onLike,u=e.onShare,s=e.onEnter,p=e.onDownload;return fe.a.createElement(de.Fragment,null,i&&fe.a.createElement(ot,null),o&&fe.a.createElement(tt,{boxInfo:r.get(a),liked:n.get(a),onLike:l,onDownload:p,onShare:u}),fe.a.createElement("div",{className:rt.a.container},fe.a.createElement("div",{className:rt.a.list},!i&&0===t.length&&fe.a.createElement("h1",null,"No colors to show"),t.map((function(e){return fe.a.createElement(ze,{key:e,vertical:c,liked:n.get(e),boxInfo:r.get(e),onLikeClick:l,onCanvasClick:s})})))))}}])&&ct(n.prototype,r),o&&ct(n,o),t}(fe.a.Component);pt.propTypes={selectedId:ke.a.string,loading:ke.a.bool,vertical:ke.a.bool,hasSelected:ke.a.bool,liked:ke.a.object.isRequired,list:ke.a.array.isRequired,match:ke.a.object.isRequired,colorDef:ke.a.object.isRequired,onInit:ke.a.func.isRequired,onLike:ke.a.func.isRequired,onEnter:ke.a.func.isRequired,onShare:ke.a.func.isRequired,onDownload:ke.a.func.isRequired};var dt=pt,ft={history:null,isAuth:!1},mt={"/popular":"colorIdByLike","/":"colorId","/like":"myLiked","/portfolio":"myPortfolio"},bt=Object(be.connect)((function(e,t){var n=e.color,r=e.user,o=t.location.pathname,a=t.match.params.id,i=t.history;ft.isAuth=Boolean(r.get("detail")),ft.history=i;var c=n.get("colorDef"),l=n.get("liked"),u=c.has(a),s=n.get(mt[o]||"colorId");return{loading:n.get("loading"),list:s,colorDef:c,liked:l,selectedId:a,hasSelected:u,vertical:n.get("showVertical")}}),(function(e){return{onInit:function(t){if("/portfolio"===t){var n=Object(Oe.createAction)("color/getUserColor");e(n("myPortfolio"))}else if("/like"===t){var r=Object(Oe.createAction)("color/getUserColor");e(r("myLiked"))}},onLike:function(t){var n=t.id,r=t.willLike,o=Object(Oe.createAction)("color/toggleLike"),a=ft.isAuth;e(o({isAuth:a,willLike:r,id:n}))},onEnter:function(e){window.scrollTo(0,0),ft.history.push("/color/".concat(e.get("id")))},onDownload:function(t){var n=Object(Oe.createAction)("color/download");e(n({color:t.get("color"),id:t.get("id")}))},onShare:function(t){var n=Object(Oe.createAction)("color/share");e(n(t))}}}))(dt),ht=Object(de.lazy)((function(){return n.e(0).then(n.bind(null,50))})),gt=Object(de.lazy)((function(){return n.e(2).then(n.bind(null,49))})),vt=function(){return fe.a.createElement(de.Suspense,{fallback:fe.a.createElement(ot,null)},fe.a.createElement(Ce.Switch,null,fe.a.createElement(Ce.Route,{exact:!0,path:"/",component:bt}),fe.a.createElement(Ce.Route,{path:"/latest",component:bt}),fe.a.createElement(Ce.Route,{path:"/popular",component:bt}),fe.a.createElement(Ce.Route,{path:"/color/:id",component:bt}),fe.a.createElement(Ce.Route,{path:"/like",component:bt}),fe.a.createElement(Ce.Route,{path:"/portfolio",component:bt}),fe.a.createElement(Ce.Route,{path:"/new",component:gt}),fe.a.createElement(Ce.Route,{path:"/adminpanel",component:ht})))},yt=(n(36),n(32)),kt=n.n(yt),Et=n(21),wt=n.n(Et),_t=function(){return fe.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24"},fe.a.createElement("title",null,"translation"),fe.a.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}),fe.a.createElement("path",{d:" M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z "}))},Ct=n(10),Ot=function(e){var t=e.onChange;return fe.a.createElement("div",{className:"navbar-dropdown"},Ct.a.map((function(e){return fe.a.createElement("a",{className:"navbar-item",key:e.code,onClick:function(){t(e.code)}},e.name)})))};Ot.propTypes={onChange:ke.a.func.isRequired};var xt=Ot;function Lt(e){return(Lt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function St(){return(St=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Rt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function jt(e){return(jt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function It(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Nt(e,t){return(Nt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Tt=wt.a.selected,Pt=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(o=jt(t).call(this,e))||"object"!==Lt(o)&&"function"!=typeof o?It(r):o).state={showMenu:!1},n.onFBClick=n.onFBClick.bind(It(n)),n.onLogout=n.onLogout.bind(It(n)),n.toggleMobileMenu=n.toggleMobileMenu.bind(It(n)),n.onClickNav=n.onClickNav.bind(It(n)),n.linkElem=n.props.ssr?"a":Ce.Link,n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Nt(e,t)}(t,e),n=t,(r=[{key:"hrefAttr",value:function(e){return this.props.ssr?{href:e}:{to:e}}},{key:"toggleMobileMenu",value:function(){this.setState({showMenu:!this.state.showMenu})}},{key:"onClickNav",value:function(){this.state.showMenu&&this.setState({showMenu:!1})}},{key:"onFBClick",value:function(e){e.preventDefault(),this.props.onOAuth(this.props.facebookUrl)}},{key:"onLogout",value:function(){this.props.onLogout()}},{key:"render",value:function(){var e=this,t=this.props,n=t.url,r=t.detail,o=t.facebookUrl,a=Boolean(r),i=this.context,c=this.linkElem,l="/popular"===n,u=n in{"/latest":!0,"/":!0},s=a?r.get("img"):"//dkny.oss-cn-hangzhou.aliyuncs.com/2/icon.png";return fe.a.createElement("nav",{className:"navbar is-fixed-top",role:"navigation","aria-label":"main navigation"},fe.a.createElement("div",{className:"navbar-brand"},fe.a.createElement(c,St({className:"navbar-item"},this.hrefAttr("/"),{onClick:this.onClickNav}),fe.a.createElement("img",{src:s,height:"32",width:"32",alt:"colorpk icon"})),fe.a.createElement("a",{role:"button",className:"navbar-burger burger","aria-label":"menu","aria-expanded":"false",onClick:this.toggleMobileMenu},fe.a.createElement("span",{"aria-hidden":"true"}),fe.a.createElement("span",{"aria-hidden":"true"}),fe.a.createElement("span",{"aria-hidden":"true"}))),fe.a.createElement("div",{className:"navbar-menu ".concat(this.state.showMenu?"is-active":"")},fe.a.createElement("div",{className:"navbar-start"},a&&fe.a.createElement("div",{className:"navbar-item has-dropdown is-hoverable"},fe.a.createElement("a",{className:"navbar-link ".concat(["/like","/portfolio"].includes(n)?Tt:"")},r.get("name")),fe.a.createElement("div",{className:"navbar-dropdown"},fe.a.createElement(c,St({className:"navbar-item"},this.hrefAttr("/portfolio"),{onClick:function(){e.props.onEnterProfile("myPortfolio"),e.onClickNav()}}),i.profile),fe.a.createElement(c,St({className:"navbar-item"},this.hrefAttr("/like"),{onClick:function(){e.props.onEnterProfile("myLiked"),e.onClickNav()}}),i.like),r.get("isadmin")&&fe.a.createElement(c,St({className:"navbar-item"},this.hrefAttr("/adminpanel"),{onClick:this.onClickNav}),i.admin),fe.a.createElement("hr",{className:"navbar-divider"}),fe.a.createElement("a",{className:"navbar-item",onClick:function(t){t.preventDefault(),e.onLogout()}},i.logOut))),fe.a.createElement(c,St({},this.hrefAttr("/popular"),{className:"navbar-item ".concat(l?Tt:""),onClick:this.onClickNav}),i.popular),fe.a.createElement(c,St({},this.hrefAttr("/latest"),{className:"navbar-item ".concat(u?Tt:""),onClick:this.onClickNav}),i.latest),fe.a.createElement("div",{className:"navbar-item has-dropdown is-hoverable"},fe.a.createElement("a",{className:"navbar-link"},i.more),fe.a.createElement("div",{className:"navbar-dropdown"},fe.a.createElement("a",{className:"navbar-item",href:"//www.colorpk.com"},"ColorPK v2.0"),fe.a.createElement("a",{className:"navbar-item",href:"//www.colorpk.com/about"},i.about),fe.a.createElement("hr",{className:"navbar-divider"}),fe.a.createElement("a",{className:"navbar-item",href:"//github.com/im6/vp/issues"},i.reportIssue))),fe.a.createElement("div",{className:"navbar-item has-dropdown is-hoverable"},fe.a.createElement("a",{className:"navbar-link"},fe.a.createElement(_t,null),fe.a.createElement("span",{className:wt.a.translationText},i.language)),fe.a.createElement(xt,{onChange:this.props.onChangeLang}))),fe.a.createElement("div",{className:"navbar-end"},fe.a.createElement("div",{className:"navbar-item"},fe.a.createElement("div",{className:"buttons"},fe.a.createElement(c,St({},this.hrefAttr("/new"),{className:"button is-primary",onClick:this.onClickNav}),i.newColor),"  ",!a&&o&&fe.a.createElement("a",{className:"button is-info",onClick:this.onFBClick},i.fbLogin))))))}}])&&Rt(n.prototype,r),o&&Rt(n,o),t}(fe.a.Component);Pt.propTypes={ssr:ke.a.bool,url:ke.a.string,detail:ke.a.object,facebookUrl:ke.a.string,onLogout:ke.a.func.isRequired,onOAuth:ke.a.func.isRequired,onChangeLang:ke.a.func.isRequired,onEnterProfile:ke.a.func.isRequired},Pt.contextType=Ze.a;var At=Pt,qt={},Mt=Object(Ce.withRouter)(Object(be.connect)((function(e,t){var n=e.user,r=t.location,o=t.history;return qt.history=o,{url:r.pathname,detail:n.get("detail"),facebookUrl:n.get("facebookUrl")}}),(function(e){return{onOAuth:function(t){var n=Object(Oe.createAction)("user/onOAuth");e(n(t))},onLogout:function(){var t=Object(Oe.createAction)("user/logoff");e(t()),qt.history.push("/")},onEnterProfile:function(t){var n=Object(Oe.createAction)("color/getUserColor");e(n(t))},onChangeLang:function(t){var n=Object(Oe.createAction)("user/setLanguage");e(n(t))}}}))(At));function Dt(e){return(Dt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ut(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ft(e,t){return!t||"object"!==Dt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Bt(e){return(Bt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ht(e,t){return(Ht=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Vt=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Ft(this,Bt(t).call(this,e))).state={showLoading:!0},n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ht(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){this.setState({showLoading:!1})}},{key:"render",value:function(){var e=this.state.showLoading;return fe.a.createElement("div",{className:kt.a.container},fe.a.createElement(Mt,null),e?fe.a.createElement(ot,null):fe.a.createElement(vt,null))}}])&&Ut(n.prototype,r),o&&Ut(n,o),t}(fe.a.Component),Wt=Object(be.connect)((function(e){return{lang:e.user.get("lang")}}))(Ze.b),Gt=n(37),Kt=Gt.keys().reduce((function(e,t){return e[t.replace(/\.js$/,"").replace(/^.\//,"")]=Gt(t).default,e}),{}),Qt=W.a.v1().substring(0,8),Yt=function(e,t){var n=Object(ge.createStore)(Object(ge.combineReducers)(Kt),{user:Object(me.fromJS)({detail:null,facebookUrl:null,lang:e.cookies.lang})}),r=fe.a.createElement(he.StaticRouter,{location:e.url},fe.a.createElement(be.Provider,{store:n},fe.a.createElement(Wt,null,fe.a.createElement(Vt,null)))),o=Object(ve.renderToString)(r),a=fe.a.createElement(_e,{title:"".concat("ColorPK | Your Best Color Picker"),version:Qt,style:"".concat(w,"main.css"),script:"".concat(w,"main.js"),csrfToken:e.csrfToken(),lastBuildDate:"1/30/2020, 8:11:54 PM EST"},o),i=Object(ve.renderToStaticMarkup)(a);t.status(200),t.send("<!DOCTYPE html>".concat(i))},zt=c()();zt.set("trust proxy",!0),zt.use(a()()),zt.use(u.a.json()),zt.use(u.a.urlencoded({extended:!1})),zt.use(p()()),zt.use(f()({name:"session",keys:[h],maxAge:2592e5,httpOnly:!0}));var Jt=n(41).default;zt.get("/robots.txt",Jt),zt.get("/favicon.ico",Jt),zt.get("/sitemap.xml",Jt),zt.get("/_ah/:action",(function(e,t){var n=e.params.action;t.json({status:"".concat(n," - ok")})})),zt.use((function(){for(var e=void 0,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];C()(n[0],"body._csrf",null)===g?(console.log("csrf exception"),n[2]()):F.apply(e,n)})),zt.post("/graphql",pe),zt.get("/auth/:oauth",T),["/","/latest","/popular","/color/:colorId","/new"].forEach((function(e){zt.get(e,Yt)})),zt.get("/like",P,Yt),zt.get("/portfolio",P,Yt),zt.get("/adminpanel",(function(e,t,n){j(e)?n():n(403)}),Yt),zt.use((function(e,t){console.error("Error: 404, ".concat(e.url," not found")),t.status(400).sendFile(D)})),zt.use((function(e,t,n,r){console.error("Error: ".concat(e.toString(),", ").concat(t.url)),"POST"===t.method?n.status(400).json({errors:!0}):n.status(400).sendFile(D)}));var Xt=b||8080;zt.listen(Xt,(function(){return console.log("app (mode: ".concat("production",") is running on: http://localhost:").concat(Xt))})).timeout=5e3,Object(r.exec)("curl ifconfig.me",(function(e,t,n){e?console.error(n):console.log("public IP addr: ".concat(t))}))},function(e,t){e.exports=require("react-color")}]);