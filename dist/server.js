!function(e){var t={};function r(n){if(t[n])return t[n].exports;var a=t[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)r.d(n,a,function(t){return e[t]}.bind(null,a));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/",r(r.s=16)}([function(e,t){e.exports=require("react")},function(e,t){e.exports=require("lodash.get")},function(e,t){e.exports=require("graphql")},function(e,t){e.exports=require("prop-types")},function(e,t){e.exports=require("uuid")},function(e,t){e.exports=require("mysql")},function(e,t){e.exports=require("body-parser")},function(e,t){e.exports=require("axios")},function(e,t){e.exports=require("react-dom/server")},function(e,t){e.exports=require("express")},function(e,t){e.exports=require("helmet")},function(e,t){e.exports=require("cookie-parser")},function(e,t){e.exports=require("cookie-session")},function(e,t){e.exports=require("path")},function(e,t){e.exports=require("csurf")},function(e,t){e.exports=require("express-graphql")},function(e,t,r){e.exports=r(19)},function(e,t){e.exports=require("regenerator-runtime/runtime")},function(e,t){},function(e,t,r){"use strict";r.r(t);r(17);var n=r(9),a=r.n(n),o=r(10),i=r.n(o),s=r(6),c=r.n(s),l=r(11),u=r.n(l),p=r(12),m=r.n(p),d=process.env,E=d.SERVER_PORT,f=d.SESSION_SECRET,h=d.CSRF_EXCEPTION,g=d.FB_APP_KEY,v=d.FB_APP_SECRET,y=d.FB_REDIRECT_URL,b="https://graph.facebook.com/v3.3",k="//dkny.oss-cn-hangzhou.aliyuncs.com/2/",w=r(1),_=r.n(w),R=r(7),S=r.n(R),x=function(e){return"https://www.facebook.com/v3.3/dialog/oauth?client_id=".concat(g,"&response_type=code&state=").concat(e,"&redirect_uri=").concat(y)},L=function(e,t){return Boolean(_()(e,"session.app.isAuth",!1)&&(t||_()(e,"session.app.dbInfo.id",null)))},T=function(e){var t=_()(e,"session.app.tokenInfo.access_token",null);return"string"==typeof t&&t.length>0},N=function(e){return L(e)&&_()(e,"session.app.dbInfo.isAdmin",!1)};function O(e,t,r,n,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,a)}var C=function(e,t){var r=t.code;return{client_id:g,client_secret:v,code:r,redirect_uri:y}},I=function(){var e,t=(e=regeneratorRuntime.mark((function e(t,r){var n,a,o,i,s,c,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=_()(t,"query.code",null),a=_()(t,"query.state",null),o=_()(t,"params.oauth",null),i=_()(t,"session.app.oauthState",null),!n||!a||a!==i){e.next=14;break}return console.log("redirected by ".concat(o," auth...")),s=C(0,t.query),e.next=9,u=s,S()({baseURL:b,method:"get",url:"/oauth/access_token",params:u});case 9:c=e.sent,(l=c.data).access_token?t.session.app={oauth:o,isAuth:!0,tokenInfo:l}:t.session.app={isAuth:!1,authError:"get token failed."},e.next=16;break;case 14:console.log("inconsistant session, error msg in session"),t.session.app={isAuth:!1,authError:"Sorry, something error, please try again."};case 16:r.redirect("/");case 17:case"end":return e.stop()}var u}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function i(e){O(o,n,a,i,s,"next",e)}function s(e){O(o,n,a,i,s,"throw",e)}i(void 0)}))});return function(e,r){return t.apply(this,arguments)}}(),P=function(e,t,r){L(e)?r():r(401)},A=r(13),q=r.n(A),M=process.env.PWD,F=q.a.resolve(M,"./dist/error.html"),j=r(14),D=r.n(j)()(),U=r(15),H=r.n(U),W=r(4),Q=r.n(W),B=r(5),K=r.n(B),G=r(2),z=process.env,V=z.SQL_HOST,Y=z.SQL_PORT,X=z.SQL_USERNAME,J=z.SQL_PASSWORD,$=z.SQL_DATABASE,Z=K.a.createPool({connectionLimit:4,multipleStatements:!1,host:V,port:Y,user:X,password:J,database:$}),ee=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return new Promise((function(r,n){Z.query(e,t,(function(e,t){e?(console.error(e),n(e)):r(t)}))}))};function te(e,t,r,n,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,a)}function re(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function i(e){te(o,n,a,i,s,"next",e)}function s(e){te(o,n,a,i,s,"throw",e)}i(void 0)}))}}var ne,ae,oe,ie,se,ce={auth:(se=re(regeneratorRuntime.mark((function e(t,r){var n,a,o,i,s,c,l,u,p,m,d,E,f,h;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!L(r,!0)||!T(r)){e.next=33;break}return n=_()(r,"session.app.tokenInfo.access_token",null),a={access_token:n,fields:"id,name,picture"},e.prev=3,e.next=6,t=a,S()({baseURL:b,method:"get",url:"/me",params:t});case 6:return o=e.sent,i=o.data,s=i.name,c=i.id,e.next=11,ee("SELECT * FROM colorpk_user WHERE oauth = 'fb' AND oauthid = ?",[c]);case 11:if(1!==(l=e.sent).length){e.next=20;break}return u=l[0],p=u.isadmin,m=u.id,r.session.app.dbInfo={id:m,name:s,isAdmin:p||!1},e.next=17,ee("SELECT color_id FROM colorpk_userlike WHERE user_id= ?",[m]);case 17:return d=e.sent,ee("UPDATE colorpk_user SET lastlogin=NOW() WHERE id=?",[m]),e.abrupt("return",{__typename:"User",id:m,name:s,isadmin:p,img:_()(i,"picture.data.url",null),likes:d.map((function(e){return e.color_id}))});case 20:return e.next=22,ee("INSERT INTO colorpk_user (oauth, name, oauthid, lastlogin) VALUES ('fb', ?, ?, NOW())",[s,c]);case 22:return E=e.sent,f=E.insertId,r.session.app.dbInfo={id:f,name:s,isAdmin:!1},e.abrupt("return",{__typename:"User",id:f,name:s,isadmin:!1,img:_()(i,"picture.data.url",null),likes:[]});case 28:return e.prev=28,e.t0=e.catch(3),e.abrupt("return",new G.GraphQLError(e.t0.toString()));case 31:e.next=36;break;case 33:return h=Q.a.v1(),r.session.app={oauthState:h},e.abrupt("return",{__typename:"AuthFailResponse",url:x(h),error:_()(r,"session.app.authError",null),status:0});case 36:case"end":return e.stop()}var t}),e,null,[[3,28]])}))),function(e,t){return se.apply(this,arguments)}),color:(ie=re(regeneratorRuntime.mark((function e(t,r){var n,a,o,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.category,L(r)||!(["LIKES","PROFILE"].indexOf(n)>-1)){e.next=3;break}return e.abrupt("return",new G.GraphQLError("color error: no user defined"));case 3:if(N(r)||"ANONYMOUS"!==n){e.next=5;break}return e.abrupt("return",new G.GraphQLError("color error: no admin access"));case 5:a=_()(r,"session.app.dbInfo.id",null),o=Object(B.escape)(a),i=null,e.t0=n,e.next="PUBLIC"===e.t0?11:"LIKES"===e.t0?15:"PROFILE"===e.t0?19:"ANONYMOUS"===e.t0?23:27;break;case 11:return e.next=13,ee("SELECT a.* FROM colorpk_color a WHERE a.display=0 ORDER BY `id` DESC");case 13:return i=e.sent,e.abrupt("break",28);case 15:return e.next=17,ee("SELECT a.* FROM colorpk_color a\n          INNER JOIN \n          (SELECT color_id FROM colorpk_userlike WHERE user_id = ?) b\n          ON id = b.color_id",[o]);case 17:return i=e.sent,e.abrupt("break",28);case 19:return e.next=21,ee("SELECT a.*, false as `liked` FROM colorpk_color a WHERE userid = ?",[o]);case 21:return i=e.sent,e.abrupt("break",28);case 23:return e.next=25,ee("SELECT * FROM colorpk_color a WHERE a.display = 1");case 25:return i=e.sent,e.abrupt("break",28);case 27:return e.abrupt("break",28);case 28:return e.prev=28,e.abrupt("return",i.map((function(e){return{id:e.id,like:e.like,color:e.color,userid:e.userid,username:e.username,createdate:e.createdate}})));case 32:return e.prev=32,e.t1=e.catch(28),e.abrupt("return",new G.GraphQLError(e.t1.toString()));case 35:case"end":return e.stop()}}),e,null,[[28,32]])}))),function(e,t){return ie.apply(this,arguments)}),likeColor:(oe=re(regeneratorRuntime.mark((function e(t,r){var n,a,o,i,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.input,a=n.id,o=n.willLike,e.prev=1,L(r)&&(i=_()(r,"session.app.dbInfo.id",null),ee(o?"INSERT INTO colorpk_userlike (user_id, color_id) VALUES (?, ?)":"DELETE FROM colorpk_userlike WHERE user_id= ? AND color_id = ?",[i,a])),e.next=5,ee("UPDATE colorpk_color SET `like` = `like` ".concat(o?"+":"-","  1 WHERE id = ?"),[a]);case 5:return s=e.sent,e.abrupt("return",{status:1===s.affectedRows?0:1});case 9:return e.prev=9,e.t0=e.catch(1),e.abrupt("return",new G.GraphQLError(e.t0.toString()));case 12:case"end":return e.stop()}}),e,null,[[1,9]])}))),function(e,t){return oe.apply(this,arguments)}),createColor:(ae=re(regeneratorRuntime.mark((function e(t,r){var n,a,o,i,s,c,l,u,p;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.input.color,a=L(r),o=_()(r,"session.app.dbInfo.name",null),i=_()(r,"session.app.dbInfo.id",null),c=(s=a&&o)?o:null,l=s?i:null,u=(10*Math.random()).toFixed(),27!==n.length){e.next=21;break}return e.prev=9,e.next=12,ee("INSERT INTO colorpk_color (`like`, color, userid, username, colortype, display, createdate) VALUES (?, ?, ?, ?, NULL, ?, NOW())",[u,n,l,c,s?0:1]);case 12:return p=e.sent,e.abrupt("return",{status:0,data:p.insertId});case 16:return e.prev=16,e.t0=e.catch(9),e.abrupt("return",new G.GraphQLError(e.t0.toString()));case 19:e.next=22;break;case 21:return e.abrupt("return",new G.GraphQLError("create error: invalid color input"));case 22:case"end":return e.stop()}}),e,null,[[9,16]])}))),function(e,t){return ae.apply(this,arguments)}),adjudicateColor:(ne=re(regeneratorRuntime.mark((function e(t,r){var n,a,o,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(N(r)){e.next=2;break}return e.abrupt("return",new G.GraphQLError("adjudicate error: no admin access"));case 2:return n=t.input,a=n.id,o=n.willLike,e.prev=3,e.next=6,ee(o?"UPDATE colorpk_color SET `display` = 0 WHERE id = ?":"DELETE FROM colorpk_color WHERE id = ?",[a]);case 6:return i=e.sent,e.abrupt("return",{status:1===i.affectedRows?0:1});case 10:return e.prev=10,e.t0=e.catch(3),e.abrupt("return",new G.GraphQLError(e.t0.toString()));case 13:case"end":return e.stop()}}),e,null,[[3,10]])}))),function(e,t){return ne.apply(this,arguments)}),logoff:function(e,t){var r=_()(t,"session.app.dbInfo.name","(unknow)");console.log("logoff ".concat(r,", delete session")),delete t.session.app;var n=Q.a.v1();return t.session.app={oauthState:n},{url:x(n)}}},le=Object(G.buildSchema)("\n  enum ColorCategory {\n    PUBLIC\n    LIKES\n    PROFILE\n    ANONYMOUS\n  }\n\n  interface MutationResponse {\n    status: Int!\n  }\n\n  type Color {\n    id: ID!\n    like: Int!\n    color: String!\n    userid: Int\n    username: String\n    createdate: String\n  }\n\n  type User {\n    id: ID!\n    img: String\n    isadmin: Boolean\n    name: String\n    likes: [Int!]\n  }\n\n  input LikeColorInputType {\n    id: ID!\n    willLike: Boolean!\n  }\n  \n  input CreateColorInputType {\n    color: String!\n  }\n\n  type LikeColorOutputType implements MutationResponse {\n    status: Int!\n  }\n\n  type AdjudicateColorOutputType implements MutationResponse {\n    status: Int!\n  }\n\n  type CreateColorOutputType implements MutationResponse {\n    status: Int!\n    data: ID!\n  }\n\n  type AuthFailResponse implements MutationResponse {\n    status: Int!\n    url: String!\n    error: String\n  }\n\n  union AuthOutputType = User | AuthFailResponse\n\n  type Mutation {\n    likeColor(input: LikeColorInputType!): LikeColorOutputType\n    createColor(input: CreateColorInputType!): CreateColorOutputType\n    adjudicateColor(input: LikeColorInputType!): AdjudicateColorOutputType\n    logoff: AuthFailResponse\n  }\n  \n  type Query {\n    color(category: ColorCategory!): [Color]\n    auth: AuthOutputType\n  }\n\n  schema {\n    query: Query\n    mutation: Mutation\n  } \n"),ue=H()({schema:le,rootValue:ce,graphiql:!1,pretty:!1}),pe=r(0),me=r.n(pe),de=r(8),Ee=r(3),fe=r.n(Ee),he=function(){return me.a.createElement(pe.Fragment,null,me.a.createElement("meta",{property:"og:url",content:"https://react.colorpk.com"}),me.a.createElement("meta",{property:"og:site_name",content:"ColorPK v1"}),me.a.createElement("meta",{property:"og:title",content:"Your Best Color Picker"}),me.a.createElement("meta",{property:"og:description",content:"ColorPK - Faster lighter and nicer color palette | 全球最大色彩搭配网站 | 颜色搭配 | 艺术设计"}),me.a.createElement("meta",{property:"og:image",content:"http://dkny.oss-cn-hangzhou.aliyuncs.com/2/icon.png"}),me.a.createElement("meta",{property:"og:image:type",content:"image/png"}),me.a.createElement("meta",{property:"og:image:width",content:"1200"}),me.a.createElement("meta",{property:"og:image:height",content:"620"}),me.a.createElement("meta",{property:"twitter:site",content:"colorpk"}),me.a.createElement("meta",{property:"twitter:creator",content:"colorpk"}),me.a.createElement("meta",{property:"twitter:card",content:"summary_large_image"}),me.a.createElement("meta",{property:"twitter:title",content:"ColorPK"}),me.a.createElement("meta",{property:"twitter:description",content:"ColorPK - Faster lighter and nicer color palette | 全球最大色彩搭配网站 | 颜色搭配 | 艺术设计"}),me.a.createElement("meta",{property:"twitter:image:src",content:"http://dkny.oss-cn-hangzhou.aliyuncs.com/2/icon.png"}),me.a.createElement("meta",{property:"twitter:image:width",content:"1200"}),me.a.createElement("meta",{property:"twitter:image:height",content:"1200"}))},ge=function(e){var t=e.title,r=e.style,n=e.script,a=e.children,o=e.version,i=e.csrfToken;return me.a.createElement("html",{lang:"en"},me.a.createElement("head",null,me.a.createElement("meta",{charSet:"utf-8"}),me.a.createElement("meta",{httpEquiv:"X-UA-Compatible",content:"IE=edge"}),me.a.createElement(he,null),me.a.createElement("title",null,t),me.a.createElement("meta",{name:"description",content:"ColorPK | Faster lighter and nicer than colorhunt | 全球最大色彩搭配网站 | 颜色搭配 | 艺术设计"}),me.a.createElement("meta",{name:"viewport",content:"width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no"}),me.a.createElement("meta",{name:"robots",content:"INDEX,FOLLOW"}),me.a.createElement("meta",{name:"keywords",content:"colorpk, colorpicker, color picker, palette, color combination"}),me.a.createElement("link",{rel:"shortcut icon",href:"//dkny.oss-cn-hangzhou.aliyuncs.com/3/fav.ico"}),me.a.createElement("link",{href:"".concat(r,"?").concat(o),rel:"stylesheet"}),me.a.createElement("script",{dangerouslySetInnerHTML:{__html:"if(window.location.hostname.indexOf('colorpk.com') > -1){\n            (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':\n            new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],\n            j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=\n            'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);\n            })(window,document,'script','dataLayer','GTM-5LX6LV3');\n\n            var initLoadTime = Date.now();\n            window.addEventListener('_COLORPK_SCRIPT_READY', function(){\n              window.dataLayer.push({\n                'scriptLoadingTime': Date.now() - initLoadTime\n              });\n            });\n          }"}})),me.a.createElement("body",null,me.a.createElement("noscript",null,me.a.createElement("iframe",{src:"https://www.googletagmanager.com/ns.html?id=GTM-5LX6LV3",height:"0",width:"0",style:{display:"none",visibility:"hidden"}})),me.a.createElement("div",{id:"app",dangerouslySetInnerHTML:{__html:a}}),me.a.createElement("div",{id:"csrf","data-token":i}),me.a.createElement("script",{src:"".concat(n,"?").concat(o),type:"text/javascript"})))};ge.propTypes={title:fe.a.string.isRequired,version:fe.a.string.isRequired,style:fe.a.string.isRequired,script:fe.a.string.isRequired,children:fe.a.string.isRequired,csrfToken:fe.a.string.isRequired};var ve=ge,ye=(r(18),function(){return me.a.createElement("div",{className:"spinContainer"},me.a.createElement("div",{className:"spinLoader"}))}),be=function(){return me.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24"},me.a.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}),me.a.createElement("path",{d:" M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z "}))},ke=function(e){var t=e.url,r=t.match(/^\/color\/\d+$/),n="/popular"===t,a=t in{"/latest":!0,"/":!0},o=r||t in{"/latest":!0,"/":!0,"/popular":!0,"/like":!0,"/portfolio":!0};return me.a.createElement(pe.Fragment,null,me.a.createElement("div",{className:"Cqiyx"},me.a.createElement("nav",{className:"navbar is-fixed-top",role:"navigation","aria-label":"main navigation"},me.a.createElement("div",{className:"navbar-brand"},me.a.createElement("a",{className:"navbar-item",href:"/"},me.a.createElement("img",{src:"//dkny.oss-cn-hangzhou.aliyuncs.com/2/icon.png",height:"32",width:"32",alt:"colorpk icon"})),me.a.createElement("a",{role:"button",className:"navbar-burger burger","aria-label":"menu","aria-expanded":"false"},me.a.createElement("span",{"aria-hidden":"true"}),me.a.createElement("span",{"aria-hidden":"true"}),me.a.createElement("span",{"aria-hidden":"true"}))),me.a.createElement("div",{className:"navbar-menu "},me.a.createElement("div",{className:"navbar-start"},me.a.createElement("a",{className:"navbar-item ".concat(n?"_1-i7j":""),href:"/popular"},"Popular"),me.a.createElement("a",{className:"navbar-item ".concat(a?"_1-i7j":""),href:"/latest"},"Latest"),me.a.createElement("div",{className:"navbar-item has-dropdown is-hoverable"},me.a.createElement("a",{className:"navbar-link"},"More"),me.a.createElement("div",{className:"navbar-dropdown"},me.a.createElement("a",{className:"navbar-item",href:"//www.colorpk.com"},"ColorPK v2.0"),me.a.createElement("a",{className:"navbar-item",href:"//www.colorpk.com/about"},"About"),me.a.createElement("hr",{className:"navbar-divider"}),me.a.createElement("a",{className:"navbar-item",href:"//github.com/im6/vp/issues"},"Report an issue"))),me.a.createElement("div",{className:"navbar-item has-dropdown is-hoverable"},me.a.createElement("a",{className:"navbar-link"},me.a.createElement(be,null),me.a.createElement("span",{className:"_3QtW-"},"Language")),me.a.createElement("div",{className:"navbar-dropdown"},me.a.createElement("a",{className:"navbar-item"},"English"),me.a.createElement("a",{className:"navbar-item"},"简体中文"),me.a.createElement("a",{className:"navbar-item"},"日本語"),me.a.createElement("a",{className:"navbar-item"},"한국어"),me.a.createElement("a",{className:"navbar-item"},"Español"),me.a.createElement("a",{className:"navbar-item"},"Русский")))),me.a.createElement("div",{className:"navbar-end"},me.a.createElement("div",{className:"navbar-item"},me.a.createElement("div",{className:"buttons"},me.a.createElement("a",{className:"button is-primary",href:"/new"},"New Color"),"  "))))),me.a.createElement(ye,null),o&&me.a.createElement("div",{className:"_10E_t"},me.a.createElement("div",{className:"_1oXEb"}))))};ke.propTypes={url:fe.a.string.isRequired};var we=ke,_e=Q.a.v1().substring(0,8),Re=function(e,t,r){var n=me.a.createElement(we,{url:e.path}),a=Object(de.renderToString)(n),o=me.a.createElement(ve,{title:"".concat("ColorPK | Your Best Color Picker"),version:_e,style:"".concat(k,"main.css"),script:"".concat(k,"main.js"),csrfToken:e.csrfToken()},a),i=Object(de.renderToStaticMarkup)(o);t.status(200),t.send("<!DOCTYPE html>".concat(i))},Se=a()();Se.set("trust proxy",!0),Se.use(i()()),Se.use(c.a.json()),Se.use(c.a.urlencoded({extended:!1})),Se.use(u()()),Se.use(m()({name:"session",keys:[f],domain:"react.colorpk.com",maxAge:2592e5,httpOnly:!0})),Se.use((function(){for(var e=void 0,t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];_()(r[0],"body._csrf",null)===h?(console.log("csrf exception"),r[2]()):D.apply(e,r)})),Se.post("/graphql",ue),Se.get("/auth/:oauth",I),["/","/latest","/popular","/color/:colorId","/new"].forEach((function(e){Se.get(e,Re)})),Se.get("/like",P,Re),Se.get("/portfolio",P,Re),Se.get("/adminpanel",(function(e,t,r){N(e)?r():r(403)}),Re),Se.use((function(e,t,r){console.error("=====  resource(".concat(e.url,") not found  =====")),t.status(404).sendFile(F)})),Se.use((function(e,t,r,n){console.error("=====  Internal Error  ====="),console.log(e.toString());var a="number"==typeof e?e:400;"POST"===t.method?r.status(a).json({errors:!0}):r.status(a).sendFile(F)})),Se.listen(E,"localhost",(function(){console.log("app(mode: ".concat("production",") is running: http://").concat("localhost",":").concat(E))})).timeout=5e3}]);